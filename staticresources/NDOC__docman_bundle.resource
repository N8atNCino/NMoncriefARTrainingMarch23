!function(n){var r={};function __webpack_require__(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,__webpack_require__),t.l=!0,t.exports}__webpack_require__.m=n,__webpack_require__.c=r,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(t,e){if(1&e&&(t=__webpack_require__(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)__webpack_require__.d(n,r,function(e){return t[e]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(e,t,n){n(1),n(2),n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(13),n(14),n(15),n(16),n(17),n(18),n(19),n(20),n(21),n(22),n(23),n(24),n(25),n(26),n(27),n(28),n(29),n(30),n(31),n(32),n(33),n(34),n(35),n(36),n(37),n(38),n(39),n(40),n(41),n(42),n(43),n(44),n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60)},function(e,t){!function(){"use strict";angular.module("docman.extensions",[])}()},function(e,t){!function(){"use strict";function downloadService(e){return{before:function before(){return!1},after:function after(e){return null},execute:function execute(){return null}}}angular.module("docman.extensions").service("downloadService",downloadService),downloadService.$inject=["$q"]}()},function(e,t){!function(){"use strict";angular.module("docman.extensions").service("customLinkService",function customLinkService(){this.customLinkDefinitions=function customLinkDefinitions(){return[]}})}()},function(e,t){!function(){"use strict";function fileUploadService(e){return{before:function before(){return!1},after:function after(e){return null},execute:function execute(e,t,n){return null}}}angular.module("docman.extensions").service("fileUploadService",fileUploadService),fileUploadService.$inject=["$q"]}()},function(e,t){!function(){"use strict";angular.module("docman.decorators",["docman.decoratorServices"])}()},function(e,t){!function(){"use strict";angular.module("docman.decoratorServices",[])}()},function(e,t){!function(){"use strict";angular.module("docman.decoratorServices").service("buttonService",function buttonService(){var n=[],r=1e3,o="disablePointerEvents";return{getButtonDefinitions:function getButtonDefinitions(){return n},addButton:function addButton(e){addButtons([e])},addButtons:addButtons,getButton:function getButton(e){for(var t in n){t=n[t];if(t.id.toLowerCase()===e.toLowerCase())return t}return null},getButtonByDisplayLabel:function getButtonByDisplayLabel(e){for(var t in n){t=n[t];if(t.displayLabel.toLowerCase()===e.toLowerCase())return t}return null}};function addButtons(e){for(var t=0;t<e.length;t++)!function setDefaultDisplayOrder(e){null!==e.displayOrder&&void 0!==e.displayOrder||(e.displayOrder=r)}(e[t]),function setDefaultCssClassOnDisabledButton(e){e.isDisabled&&(null===e.cssClass||void 0===e.cssClass||""===e.cssClass.trim()?e.cssClass=o:e.cssClass=e.cssClass+" "+o)}(e[t]);n=n.concat(e)}})}()},function(e,t){!function(){"use strict";function filterService(n){var r=[];return{getFilters:function alphaOrderedFilters(){return r.sort(function alphaSort(e,t){e=e&&e.displayLabel?e.displayLabel.toUpperCase():"",t=t&&t.displayLabel?t.displayLabel.toUpperCase():"";return e<t?-1:t<e?1:0})},getFilter:getFilter,addFilter:addFilter,addFilters:function addFilters(e){e.forEach(function(e){addFilter(e)})},activateFilter:activateFilter,deactivateAllFilters:deactivateAllFilters,getActiveFilter:function getActiveFilter(){for(var e in r){e=r[e];if(e.isActive)return e}}};function addFilter(e){void 0===e.onClick&&(e.onClick=selectFilter),r=r.concat([e])}function getFilter(e){for(var t in r){t=r[t];if(t.id===e)return t}return null}function activateFilter(e){getFilter(e).isActive=!0}function deactivateAllFilters(){!function alterFilters(t,n){r.forEach(function(e){e[t]=n})}("isActive",!1)}function selectFilter(e,t){n.uncheckAllPlaceholders(),jQuery("#accordion .collapse.in").collapse("hide"),deactivateAllFilters(),t(),activateFilter(e)}}angular.module("docman.decoratorServices").service("filterService",filterService),filterService.$inject=["placeholderService"]}()},function(e,t){!function(){"use strict";function actionService(r,n,o,a,i){var t=[],l={};return{addAction:function addAction(e){t.push(e)},getActions:function getActions(){return t},executeAction:function executeAction(e,r){var o=n.defer();{var t;null==l.component&&((t={}).showToast=showToast,t.destroyAction=destroyAction,$Lightning.createComponent(e.componentName,t,"docmanaction",function(e,t,n){"SUCCESS"===t?e.invoke(r)?(l.component=e,l.destroyComponent=e.destroy.bind(e)):e.destroy():o.reject(t,n)}))}return o.promise},destroyAction:destroyAction};function destroyAction(){l.destroyComponent(),l.component=null}function showToast(e,t){var n={};switch(n.body=t,e){case"success":n.type=a.SUCCESS,n.theme=i.THEME_SUCCESS;break;case"warning":n.type=a.WARNING,n.theme=i.THEME_WARNING;break;case"error":n.type=a.ERROR,n.theme=i.THEME_ERROR;break;default:throw"unknown toast type: "+e}r.$broadcast(o.SET_TOAST,n)}}angular.module("docman.decoratorServices").service("actionService",actionService),actionService.$inject=["$rootScope","$q","CONSTANTS","TOAST_TYPES","ALERT_DIALOG"]}()},function(e,t){!function(){"use strict";angular.module("docman.picklist.manager",[])}()},function(e,t){!function(){"use strict";function picklistMetadataService(o){return{read:function read(e,t){for(var n='<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><env:Header><SessionHeader xmlns="http://soap.sforce.com/2006/04/metadata"><sessionId>'+UniDocMan.sessionId+'</sessionId></SessionHeader></env:Header><env:Body><readMetadata xmlns="http://soap.sforce.com/2006/04/metadata"><type>'+e+"</type>",r=0;r<t.length;r++)n+="<fullNames>"+t[r]+"</fullNames>";return o({method:"POST",url:"/services/Soap/m/37.0",headers:{"Content-Type":"text/xml",SOAPAction:'""'},data:n+="</readMetadata></env:Body></env:Envelope>"})},update:function update(e){for(var t='<?xml version="1.0" encoding="UTF-8"?><env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><env:Header><SessionHeader xmlns="http://soap.sforce.com/2006/04/metadata"><sessionId>'+UniDocMan.sessionId+'</sessionId></SessionHeader></env:Header><env:Body><updateMetadata xmlns="http://soap.sforce.com/2006/04/metadata">',n=0;n<e.length;n++)t+=e[n];return o({method:"POST",url:"/services/Soap/m/37.0",headers:{"Content-Type":"text/xml",SOAPAction:'""'},data:t+="</updateMetadata></env:Body></env:Envelope>"})},createPicklistXml:function createPicklistXml(e,t,n){var r="<picklist>";t&&(r+="<controllingField>"+t+"</controllingField>");for(var o=0;o<e.length;o++){if(r+="<picklistValues><fullName>"+e[o].name+"</fullName><default>false</default>",t)for(var a=0;a<e[o].controllingFieldValues.length;a++)r+="<controllingFieldValues>"+e[o].controllingFieldValues[a]+"</controllingFieldValues>";r+="</picklistValues>"}t&&n&&(r+="<restrictedPicklist>"+n+"</restrictedPicklist>");return r+="<sorted>false</sorted></picklist>"}}}angular.module("docman.picklist.manager").service("picklistMetadataService",picklistMetadataService),picklistMetadataService.$inject=["$http"]}()},function(e,t){!function(){"use strict";function picklistValueService(n,r){var o=this;o.loadPicklistValues=function loadPicklistValues(e){var t=r.defer();return n.read("CustomField",e).then(function(e){jQuery(e.data).find("picklist").each(function(e,t){0===e?(o.picklistValues=[],jQuery(this).find("picklistValues").each(function(e,t){var n=jQuery(this).children("fullName").text();o.picklistValues.push({id:e,reason:n,comment:""})})):1===e&&jQuery(this).find("picklistValues").each(function(){var n=jQuery(this).children("fullName").text();jQuery(this).find("controllingFieldValues").each(function(){for(var e=jQuery(this).text(),t=0;t<o.picklistValues.length;t++)o.picklistValues[t].reason===e&&(o.picklistValues[t].comment=n)})})}),t.resolve(o.picklistValues)}),t.promise},o.picklistValues=[]}angular.module("docman.picklist.manager").service("picklistValueService",picklistValueService),picklistValueService.$inject=["picklistMetadataService","$q"]}()},function(e,t){!function(){"use strict";function uploadService(s,c,d,u,f,p,E,r,g,h){var m=this;return m.service={archiveExistingDocument:function archiveExistingDocument(e){if(e.isExternalReference){var t=r.defer();return t.resolve(),t.promise}return p.archiveExistingDocument(e.recordId,e.file.Id)},uploadContentDocument:function uploadContentDocument(t,n,r,o,a){var e=t.name.substr(t.name.lastIndexOf(".")+1).toLowerCase();if(null!==s.allowedFileExtensions&&0<s.allowedFileExtensions.length&&-1===s.allowedFileExtensions.indexOf(e))s.$evalAsync(function(){m.service.showToast=!0});else{var i=g.get().systemPropsMap.get(f.UNI_DOCMAN_FILE_SIZE_LIMIT);if(null!==i&&i){e=Math.round(10*t.size/1024e3)/10;if(i<e)return void s.$evalAsync(function(){m.service.showSizeToast=!0})}var l=E.uploadingToPlaceholder;E.uploadingToPlaceholder.file&&E.uploadingToPlaceholder.file.ParentId?m.service.shouldOverwrite().then(function(e){e?(m.service.archiveExistingDocument(E.uploadingToPlaceholder).then(function(){c.retrieveArchivedDocumentsWithAttachments(function(e){s.archivedFiles=e,E.convertPropertyNamesFromCamelCase(s.archivedFiles)})}),E.uploadingToPlaceholder={},upload(t,n,l,r,o,a)):(E.uploadingToPlaceholder={},o(d.CANCEL_OVERWRITE))}):(E.uploadingToPlaceholder={},upload(t,n,l,r,o,a))}},shouldOverwrite:function shouldOverwrite(){var n=r.defer();return s.$broadcast(d.SHOW_OVERWRITE_MODAL),s.$on(d.OVERWRITE_CONFIRM,function(e,t){n.resolve(t)}),n.promise},showToast:!1,showSizeToast:!1},m.service;function upload(t,n,r,o,a,e){var i,l;!function uploadExtensionExists(){return void 0!==h.before&&typeof h.before===d.FUNCTION&&void 0!==h.after&&typeof h.after===d.FUNCTION&&void 0!==h.execute&&typeof h.execute===d.FUNCTION}()||!0!==h.before()?(l={Origin:"C",PathOnClient:t.name,Title:t.name},function createBlob(e,t,n,r,o){var a=new forcetk.Client(null,null,null);u.SITE_PREFIX&&(a.setSessionToken=function(e,t,n){this.sessionId=e,this.apiVersion=null==t?"v41.0":t,this.instanceUrl=null==n?"https://"+location.hostname+u.SITE_PREFIX:n,this.proxyUrl=null,this.visualforce=!1});a.setSessionToken(c.sessionId),a.createBlob("ContentVersion",t,e.name,"VersionData",e,n,r,null,o)}(t,l,o,a,e)):(i={isExternal:!0},e=E.generateFileMetadata(r,t),p.createExternalDocumentStorageMetadata(r.recordId,t.name,e).then(function(e){e={contextId:window.DocManId,documentVersionId:e.documentVersionId,placeholderId:r.recordId,documentStoreId:e.parentId};h.execute(t,n,e).then(function(e){h.after(e),s.$broadcast(d.UPDATE_PLACEHOLDER_STATUS,r,d.STATUS_IN_FILE),o(i)},function(e){h.after(e),a(i)})}))}}angular.module("app").service("uploadService",uploadService),uploadService.$inject=["$rootScope","dataService","CONSTANTS","FILE","SYSTEM_PROPERTIES","universalDocManRemotingService","placeholderService","$q","config","fileUploadService"]}()},function(e,t){!function(){"use strict";function chatterService(s,c,d,u){return{ssfbBuildChatterCommentForChangedFields:function ssfbBuildChatterCommentForChangedFields(e,t,n){var r="",o=["LLC_BI__date__c","LLC_BI__Date__c"],a=["LLC_BI__exceptionDate__c","LLC_BI__Exception_Date__c"],i=s.getFields(o,e.screenSectionFields,!0),l=s.getFields(o,t,!0),o=s.getFields(a,e.screenSectionFields,!0),e=s.getFields(a,t,!0),a=null,t=null;i.value!==l.value&&(a={originalValue:c.formatMillisecondsToUTCDate(i.value),updatedValue:c.formatMillisecondsToUTCDate(l.value)});o.value!==e.value&&(t={originalValue:c.formatMillisecondsToUTCDate(o.value),updatedValue:c.formatMillisecondsToUTCDate(e.value)});r+=ssfbBuildDateChatterComment(a,t),n(r)},ssfbBuildDateChatterComment:ssfbBuildDateChatterComment,ssfbBuildStatusChatterComment:function ssfbBuildStatusChatterComment(e,t){return" "+u.getLabels().STATUS_CHANGED_FROM+" "+u.getLabel(e,1)+" "+u.getLabels().TO_LABEL+" "+u.getLabel(t,1)+d.PERIOD},buildChatterCommentForChangedFields:function buildChatterCommentForChangedFields(e,t,n){var r="",o=null,a=null,i=null,l=null;i=-1<e.apexType.indexOf("LoanDocument")||-1<e.apexType.indexOf("AccountDocument")?(a=c.formatMillisecondsToUTCDate(e.fields.LLC_BI__date__c),o=c.formatMillisecondsToUTCDate(t.LLC_BI__date__c),l=c.formatMillisecondsToUTCDate(e.fields.LLC_BI__exceptionDate__c),c.formatMillisecondsToUTCDate(t.LLC_BI__exceptionDate__c)):(a=c.formatMillisecondsToUTCDate(e.fields.LLC_BI__Date__c),o=c.formatMillisecondsToUTCDate(t.LLC_BI__Date__c),l=c.formatMillisecondsToUTCDate(e.fields.LLC_BI__Exception_Date__c),c.formatMillisecondsToUTCDate(t.LLC_BI__Exception_Date__c));!o&&a?r=u.getLabels().DATE+" "+a+" "+u.getLabels().WAS_ADDED:o&&!a?r=u.getLabels().DATE+" "+o+" "+u.getLabels().WAS_REMOVED+d.PERIOD:o&&a&&o!=a&&(r=u.getLabels().DATE_CHANGED_FROM+" "+o+" "+u.getLabels().TO_LABEL+" "+a+d.PERIOD);!i&&l?r+=" "+u.getLabels().EXCEPTION_DATE+" "+l+" "+u.getLabels().WAS_ADDED:i&&!l?r+=" "+u.getLabels().EXCEPTION_DATE+" "+i+" "+u.getLabels().WAS_REMOVED+d.PERIOD:i&&l&&i!=l&&(r+=" "+u.getLabels().EXCEPTION_DATE_CHANGED_FROM+" "+i+" "+u.getLabels().TO_LABEL+" "+l+d.PERIOD);n(r)}};function ssfbBuildDateChatterComment(e,t){var n="";return e&&(n=null===e.originalValue||void 0===e.originalValue?u.getLabels().DATE+" "+e.updatedValue+" "+u.getLabels().WAS_ADDED+d.PERIOD:null===e.updatedValue||void 0===e.updatedValue?u.getLabels().DATE+" "+e.originalValue+" "+u.getLabels().WAS_REMOVED+d.PERIOD:u.getLabels().DATE_CHANGED_FROM+" "+e.originalValue+" "+u.getLabels().TO_LABEL+" "+e.updatedValue+d.PERIOD),t&&(null===t.originalValue||void 0===t.originalValue?n+=" "+u.getLabels().EXCEPTION_DATE+" "+t.updatedValue+" "+u.getLabels().WAS_ADDED:null===t.updatedValue||void 0===t.updatedValue?n+=" "+u.getLabels().EXCEPTION_DATE+" "+t.originalValue+" "+u.getLabels().WAS_REMOVED+d.PERIOD:n+=" "+u.getLabels().EXCEPTION_DATE_CHANGED_FROM+" "+t.originalValue+" "+u.getLabels().TO_LABEL+" "+t.updatedValue+d.PERIOD),n}}angular.module("app").service("chatterService",chatterService),chatterService.$inject=["ssfbService","commonService","CONSTANTS","labels"]}()},function(e,t){!function(){"use strict";function categoryService(e,a,t,i){return{fetchCategories:function fetchCategories(){var o=e.defer();return t.retrieveCategories().then(function(e){var t=[{id:"",name:a.getLabels().NONE_OPTION}];if(e){for(var n=0;n<Object.keys(e).length;n++)var r=e[n],t=t.concat(function processCategories(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&(e[t]=JSON.parse(e[t]),i.hasRequiredViewerAccess(e[t])&&n.push({id:t,name:e[t].category,viewerGroups:e[t].viewerGroups,viewerRoles:e[t].viewerRoles,viewerProfiles:e[t].viewerProfiles}));return n}(r));(t=t.slice(1)).sort(alphabetizeByName)}o.resolve(t)}),o.promise},fetchAdHocCategories:function fetchAdHocCategories(){return t.retrieveAdhocCategories()}};function alphabetizeByName(e,t){e=e.name?e.name.toUpperCase():"",t=t.name?t.name.toUpperCase():"";return t<e?1:e<t?-1:0}}angular.module("app").service("categoryService",categoryService),categoryService.$inject=["$q","labels","dataService","permissionService"]}()},function(e,t){!function(){"use strict";function ssfbService(e,i,a,n){return{buildPlaceholderFromSection:function buildPlaceholderFromSection(){var o={};return angular.forEach(a.formBuilder.fields,function(e,t){var n=a.formBuilder.fields[t];if(n)for(var r=0;r<n.length;r++)o[a.formBuilder.fields[t][r].fieldName]=a.formBuilder.fields[t][r].value}),o},clearScreenSections:clearScreenSections,getFields:function getFields(e,t,n){e=e.map(function(e){return e.toLowerCase()});var r,o=[];for(r in t)for(var a=t[r],i=0;i<a.length;i++){var l=a[i];if(-1!==e.indexOf(l.fieldName.toLowerCase())&&(o.push(l),n))return o[0]}if(n)return{};return o},getPlaceholderCategory:function getPlaceholderCategory(e){var t,n=e.screenSectionFields;for(t in n)for(var r=n[t],o=0;o<r.length;o++){var a=r[o];if(a.fieldName.toLowerCase()===i.ID_PATH.toLowerCase())return a.value}return null},hasVisibleFields:function hasVisibleFields(e){e=a.get(e);if(e&&e.guid)return 0<a.formBuilder.getVisibleFields(e.guid).length;return!1},mapValues:function mapValues(e,t){var n=Object.keys(t);if(e&&n)for(var r=0;r<n.length;r++)e[n[r]]=t[n[r]]},updateScreenSections:function updateScreenSections(){var t=e.defer();return n.getScreenSectionsForContextObject().then(function(e){a.clear(),t.resolve(e)}),t.promise}};function clearScreenSections(){a.clear()}}angular.module("app").service("ssfbService",ssfbService),ssfbService.$inject=["$q","CATEGORY_FIELD","screenSection","universalDocManRemotingService"]}()},function(e,t){!function(){"use strict";function defaultDownloadService(a,i,o,l,s,n,r){return{downloadMultipleFiles:function downloadMultipleFiles(e){var t=[],n=[];(function retrievePlaceholdersWithAttachments(e,n,r){angular.forEach(e,function(e,t){e.isSelected&&e.file&&(e.file.RecordType===o.ATTACHMENT?n.push(e):e.file.RecordType===o.FILE&&r.push(e))})})(e,t,n),function downloadContent(e){var t=s.defer();{var n,r,o;0<e.length&&(n={},r={},o="",angular.forEach(e,function(e,t){e.file.Id&&(o+=e.file.Id+"/")}),function createContentDocumentDownloadTitles(e,n,r){angular.forEach(e,function(e,t){n[e.file.Id]=generateDownloadTitle(e),r[e.file.Id]=e.file.Title})}(e,n,r),l.renameMultipleContentDocuments(n).then(function(){o=o.substring(0,o.length-1),function initiateContentDocumentDownload(e,t){window.open(i.CONTENT_DOWNLOAD_URL+t).addEventListener("unload",function(){l.renameMultipleContentDocuments(e)},!0)}(r,o)}))}return t.resolve(),t.promise}(n).then(function downloadAttachments(e){angular.forEach(e,function(e){updateFileTitleAndDownload(e.file.Id,generateDownloadTitle(e),!1,getDownloadLink(i.ATTACHMENT_DOWNLOAD_URL,e.file.Id,e.downloadAsPDF),e.file.Title)})}(t))},downloadVersion:function downloadVersion(e,t){window.open(getDownloadLink(i.CONTENT_DOWNLOAD_URL,e,t))},getDownloadLink:getDownloadLink,executeDownload:function executeDownload(t){var n;t.file.RecordType===i.ATTACHMENT?updateFileTitleAndDownload(t.file.Id,generateDownloadTitle(t),!1,getDownloadLink(i.ATTACHMENT_DOWNLOAD_URL,t.file.Id,t.downloadAsPDF),t.file.Title):t.file.Id&&!t.isDocumentExternal?updateFileTitleAndDownload(n=t.file.Id,generateDownloadTitle(t),!0,getDownloadLink(i.CONTENT_DOWNLOAD_URL,n,t.downloadAsPDF),t.file.Title):t.isDocumentExternal?window.open(t.file.externalDownloadUrl):l.getContentDocumentLink(t.file.ParentId).then(function(e){updateFileTitleAndDownload(n=e.ContentDocument.LatestPublishedVersionId,generateDownloadTitle(t),!0,getDownloadLink(i.CONTENT_DOWNLOAD_URL,n,t.downloadAsPDF),t.file.Title)})},updateFileTitleAndDownload:updateFileTitleAndDownload};function updateFileTitleAndDownload(e,t,n,r,o){a.updateFileTitle(e,t,n,function(){window.setTimeout(function(){window.open(r).addEventListener("unload",function(){a.updateFileTitle(e,o,n,function(){})},!0)},1e3)})}function generateDownloadTitle(e){if(1==n.get().systemPropsMap.get(r.DOCUMENT_DOWNLOAD_NAME_KEY))return e.file.Title;var t=e.name;return e.year&&(t+=i.DASH+e.year),t+=e.file.Title.substring(e.file.Title.lastIndexOf(i.PERIOD))}function getDownloadLink(e,t,n){t=e+t;return n&&(t+=i.AS_PDF),t}}angular.module("app").service("defaultDownloadService",defaultDownloadService),defaultDownloadService.$inject=["dataService","FILE","FILE_RECORD_TYPES","universalDocManRemotingService","$q","config","SYSTEM_PROPERTIES"]}()},function(e,t){!function(){"use strict";function dataService(t,e){var a=this;return a.config=e.get(),a.namespacePrefix=a.config.namespacePrefix?a.config.namespacePrefix.replace("__","."):"nDOC.",{addChatterComment:function addChatterComment(e,t,n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.addChatterComment",e,t,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r&&r.apply(this,[t,e]))},{escape:!1,buffer:!1})},addNewPlaceholder:function addNewPlaceholder(e,n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"PlaceholderDataController.addNewPlaceholder",window.DocManId,e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},configureContextObject:function configureContextObject(n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.configureContextObject",a.config.contextIdPageParam,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},createFileStagingPlaceholder:function createFileStagingPlaceholder(n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.createFileStagingPlaceholder",window.DocManId,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},deletePlaceholder:function deletePlaceholder(e,n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.deletePlaceholder",window.DocManId,e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r&&r.apply(this,[t,e]))},{escape:!1,buffer:!1})},deletePlaceholderIndex:function deletePlaceholderIndex(e,n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.deletePlaceholderIndex",window.DocManId,e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},dispatchErrorEvent:UniDocMan.dispatchErrorEvent,duplicatePlaceholder:function duplicatePlaceholder(e,n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.duplicatePlaceholder",window.DocManId,e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},getNamespacePrefix:function getNamespacePrefix(n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.getNamespacePrefix",function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrieveArchivedDocumentsWithAttachments:function retrieveArchivedDocumentsWithAttachments(n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.retrieveArchivedDocumentsWithAttachments",window.DocManId,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrieveCategories:function retrieveCategories(){var n=t.defer();return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"PlaceholderDataController.retrieveCategories",window.DocManId,function(e,t){t.status?n.resolve([e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject([t,e]))},{escape:!1,buffer:!1}),n.promise},retrieveChatterComments:function retrieveChatterComments(e,n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.retrieveChatterComments",e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrieveDocumentsWithAttachmentsForSpecifiedId:function retrieveDocumentsWithAttachmentsForSpecifiedId(e,n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.retrieveDocumentsWithAttachments",e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrieveFileStagingPlaceholders:function retrieveFileStagingPlaceholders(n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.retrieveFileStagingPlaceholders",window.DocManId,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrievePlaceholderFieldSet:function retrievePlaceholderFieldSet(e,n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"PlaceholderDataController.retrievePlaceholderFieldSet",e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrievePlaceholderWithFields:function retrievePlaceholderWithFields(e,n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"PlaceholderDataController.retrievePlaceholderWithFields",e,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrieveClosingChecklistNamesByCategory:function retrieveClosingChecklistNamesByCategory(e){var n=t.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",a.namespacePrefix+"UniDocManRemoteActionController.RetrieveClosingChecklistByDocType",{Id:e},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},retrieveUserAssignedPermissions:function retrieveUserAssignedPermissions(n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.retrieveUserAssignedPermissions",function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},sessionId:window.UniDocMan.sessionId,updateAccountOnPlaceholder:function updateAccountOnPlaceholder(e,t,n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.updateAccountOnPlaceholder",e,t,window.DocManId,function(e,t){t.status?n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.apply(this,[t,e]))},{escape:!1,buffer:!1})},updateFileTitle:function updateFileTitle(e,t,n,r,o){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"UniversalDocManController.updateFileTitle",e,t,n,function(e,t){t.status?r.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.apply(this,[t,e]))},{escape:!1,buffer:!1})},updatePlaceholderStatus:function updatePlaceholderStatus(e,t,n,r){return Visualforce.remoting.Manager.invokeAction(a.namespacePrefix+"PlaceholderDataController.updatePlaceholderStatus",e,t,function(e,t){t.status?n&&n.apply(this,[e]):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r&&r.apply(this,[t,e]))},{escape:!1,buffer:!1})},retrieveAdhocCategories:function retrieveAdhocCategories(){var n=t.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",a.namespacePrefix+"PlaceholderDataController.RetriveAdHocCategories",{contextId:window.DocManId,userLicense:a.config.userLicenseType,userProfile:a.config.userProfileName,userRole:UniDocMan.getUserRoleName(),userGroups:JSON.stringify(a.config.userGroupsList)},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise}}}angular.module("app").service("dataService",dataService),dataService.$inject=["$q","config"]}()},function(e,t){!function(){"use strict";function universalDocManRemotingService(s,e){var c=this;return c.config=e.get(),c.namespacePrefix=c.config.namespacePrefix?c.config.namespacePrefix.replace("__","."):"nDOC.",{archivePlaceholderFromFileStaging:function archivePlaceholderFromFileStaging(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.archivePlaceholderFromFileStaging",window.DocManId,e,function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},createFileStagingPlaceholder:function createFileStagingPlaceholder(){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.createFileStagingPlaceholder",window.DocManId,function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},archivePlaceholdersFromFileStaging:function archivePlaceholdersFromFileStaging(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.archivePlaceholdersFromFileStaging",window.DocManId,e,function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},archiveExistingDocument:function archiveExistingDocument(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.archiveExistingDocument",window.DocManId,e,t,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrievePlaceholderFieldSetAdd:function retrievePlaceholderFieldSetAdd(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"PlaceholderDataController.retrievePlaceholderFieldSetAdd",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},takeOwnershipOfDocument:function takeOwnershipOfDocument(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"SuperUserUtils.takeOwnershipOfDocument",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrievePlaceholderNames:function retrievePlaceholderNames(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"PlaceholderDataController.getPlaceholderNames",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrievePledgedCollateral:function retrievePledgedCollateral(){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"PlaceholderDataController.getPledgedCollateral",window.DocManId,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrieveSystemPropertyAsBoolean:function retrieveSystemPropertyAsBoolean(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.retrieveSystemPropertyAsBoolean",e,t,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},isDocStoreShared:function isDocStoreShared(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.isDocStoreShared",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},savePlaceholderData:function savePlaceholderData(e,t,n){var r=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"PlaceholderDataController.savePlaceholderData",window.DocManId,e,t,n,function(e,t){t.status?r.resolve(e):r.reject(t.message)},{escape:!1,buffer:!1}),r.promise},savePlaceholderViewerPerms:function savePlaceholderViewerPerms(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"PlaceholderDataController.SavePlaceholderViewerPerms",{contextObjectId:window.DocManId,placeholderId:e,placeholderViewerPerms:JSON.stringify(t)},function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},getPlaceholderPermOptions:function getPlaceholderPermOptions(){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"PlaceholderDataController.GetPlaceholderPermOptions",{},function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},savePlaceholderPortalData:function savePlaceholderPortalData(e,t,n){var r=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"PlaceholderDataController.SavePlaceholderPortalDataEndpoint",{contextObjectId:window.DocManId,placeholderId:e,placeholder:JSON.stringify(t),fieldsToNull:JSON.stringify(n)},function(e,t){t.status?r.resolve(e):r.reject(t.message)},{escape:!1,buffer:!1}),r.promise},savePortalRejectionReasons:function savePortalRejectionReasons(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.savePortalRejectionReasons",window.DocManId,e,t,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},removeFileFromPlaceholders:function removeFilesFromPlaceholders(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.removeFilesFromPlaceholders",window.DocManId,e,function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},renameMultipleContentDocuments:function renameMultipleContentDocuments(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.renameMultipleContentDocuments",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrieveAttachment:function retrieveAttachment(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"PlaceholderDataController.retrieveAttachment",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1},{buffer:!1}),n.promise},updatePlaceholderFields:function updatePlaceholderFields(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.updatePlaceholderFields",window.DocManId,e,t,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrieveDocuments:function retrieveDocuments(){var n=s.defer();""===window.DocManId&&(window.DocManId=c.config.contextIdPageParam);return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.retrieveDocuments",window.DocManId,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrieveIsTranslated:function retrieveIsTranslated(){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniversalDocManController.RetrieveIsTranslated",{},function(e,t){t.status?n.resolve(e):n.reject(t.message)},{buffer:!1,escape:!1}),n.promise},retrieveMultiplePledgedCollateral:function retrieveMultiplePledgedCollateral(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"PlaceholderDataController.getMultiplePledgedCollateral",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},retrieveLegalEntities:function retrieveLegalEntities(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.retrieveLegalEntities",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise},getContentDocumentLink:function getContentDocumentLink(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.getContentDocumentLink",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!0}),n.promise},getContentDocumentLinks:function getContentDocumentLinks(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.getContentDocumentLinks",e,function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!0}),n.promise},getDocumentVersions:function getDocumentVersions(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.getDocumentVersions",{placeholderId:e},function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!0}),n.promise},getContentDocumentByVersion:function getContentDocumentByVersion(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.getContentDocumentByVersion",{contentVersionId:e,contentDocumentId:t},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},setPreviewConfiguration:function setPreviewConfiguration(e,t,n){var r=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.setPreviewConfiguration",{contentVersionId:e,previewUrlCount:t,previewFormat:n},function(e,t){t.status?r.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.reject(t.message))},{escape:!1,buffer:!1}),r.promise},linkRelationshipDocuments:function linkRelationshipDocuments(e,t,n,r){var o=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.linkRelationshipDocumentsWithAddtionalProperties",e,t,n,r,function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))},{escape:!1,buffer:!1}),o.promise},createDocumentStorageMetadata:function createDocumentStorageMetadata(e,t,n,r){var o=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.createDocumentStorageMetadataWithAdditionalParameters",e,t,n,r,function(e,t){t.status?o.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),o.reject(t.message))},{escape:!1,buffer:!1}),o.promise},createExternalDocumentStorageMetadata:function createExternalDocumentStorageMetadata(e,t,n){var r=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.createExternalDocumentStorageMetadata",{placeholderId:e,fileName:t,additionalProperties:n},function(e,t){t.status?r.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),r.reject(t.message))},{escape:!1,buffer:!1}),r.promise},getConfigurableColumns:function getConfigurableColumns(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.retrieveConfigurableColumns",e,function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},createCollection:function createCollection(e,t){function bf(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))}var n=s.defer();t?Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.CreateCollection",{contextId:window.DocManId,docStoreIds:JSON.stringify(e)},bf,{escape:!1,buffer:!1}):Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.createCollection",e,bf,{escape:!1,buffer:!1});return n.promise},deleteCollection:function deleteCollection(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.deleteCollection",{collectionId:e},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},sendCollection:function sendCollection(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.sendCollectionForSignature",{collectionId:e,signerMessage:t,contextObjectId:window.DocManId},function(e,t){e.sendResult?n.resolve(e.sendResult):(UniDocMan.dispatchErrorEvent(t.type,e.errorMessage,t.where),n.reject(e.errorMessage))},{escape:!1,buffer:!1}),n.promise},getCollectionIds:function getCollectionIds(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.getCollectionIds",e,function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},cancelSignatureCollection:function cancelSignatureCollection(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction(c.namespacePrefix+"UniversalDocManController.cancelSignatureCollection",e,function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},getESignatureDefaultMessage:function getESignatureDefaultMessage(){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.getESignatureDefaultMessage",{contextObjectId:window.DocManId},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},linkDocumentVersion:function linkDocumentVersion(e,t,n,r,o,a,i){var l=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.LinkDocumentVersion",{sourceContentVersionId:e,targetPlaceholderId:t,additionalProperties:n,isImported:r,isExternalDocument:o,fileName:a,sourceDocumentVersionId:i},function(e,t){t.status?l.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),l.reject(t.message))},{escape:!1,buffer:!1}),l.promise},retrieveDependentPicklist:function retrieveDependentPicklist(e,t,n){var r=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.retrieveDependentPicklist",{objectType:e,controllingField:t,dependentField:n},function(e,t){t.status?r.resolve(e):r.reject(t.message)},{escape:!1,buffer:!1}),r.promise},getReviewStatusOptions:function getReviewStatusOptions(){var n=s.defer();""===window.DocManId&&(window.DocManId=c.config.contextIdPageParam);return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.retrieveReviewStatusOptions",{contextObjectId:window.DocManId},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},requestPortalDocuments:function requestPortalDocuments(e){var n=s.defer(),e=JSON.stringify(e);return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.requestPortalDocuments",{placeholders:e,contextObjectId:window.DocManId},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},cancelPortalRequests:function cancelPortalRequests(e){var n=s.defer(),e=JSON.stringify(e);return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.cancelPortalRequests",{placeholderIds:e,contextObjectId:window.DocManId},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},getBulkUpdateScreenSectionData:function getBulkUpdateScreenSectionData(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.getBulkUpdateScreenSectionData",{contextId:e,placeholderIds:JSON.stringify(t)},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},updateRequirementRemote:function updateRequirementRemote(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.updateRequirementRemote",{placeholderIds:JSON.stringify(e)},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},retrieveActiveDocumentCollections:function retrieveActiveDocumentCollections(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.RetrieveActiveDocumentCollections",{collectionIds:JSON.stringify(e)},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},associateDocsToCollection:function associateDocsToCollection(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.AssociateDocsToCollection",{contextId:window.DocManId,docStoreIds:JSON.stringify(e),collectionId:t},function(e,t){t.status?n.resolve(e,t):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},createVendorCollection:function createVendorCollection(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.CreateVendorCollection",{contextId:window.DocManId,docStoreIds:JSON.stringify(e),collectionId:t},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},unlinkRequirementFromPlaceholder:function unlinkRequirementFromPlaceholder(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.unlinkRequirementFromPlaceholder",{placeholderIds:JSON.stringify(e)},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},getESignatureTaggingUrl:function getESignatureTaggingUrl(e){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.GetESignatureTaggingUrl",{collectionId:e},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},retrieveFieldSetMetadata:function retrieveFieldSetMetadata(e,t){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke","LLC_BI.FieldSetMetadataLoaderRemote_v1.Load",{args:JSON.stringify({filters:{contextType:e,identities:t}})},function(e,t){t.status?n.resolve(e):(UniDocMan.dispatchErrorEvent(t.type,t.message,t.where),n.reject(t.message))},{escape:!1,buffer:!1}),n.promise},getScreenSectionsForContextObject:function getScreenSectionsForContextObject(){var n=s.defer();return Visualforce.remoting.Manager.invokeAction("nFORCE.RemoteActionController.invoke",c.namespacePrefix+"UniDocManRemoteActionController.retrieveScreenSections",{contextObjectId:window.DocManId},function(e,t){t.status?n.resolve(e):n.reject(t.message)},{escape:!1,buffer:!1}),n.promise}}}angular.module("app").service("universalDocManRemotingService",universalDocManRemotingService),universalDocManRemotingService.$inject=["$q","config"]}()},function(e,t){!function(){"use strict";function commonService(a,i,l,s,c,d,u,e,r,f,p,t,E,g){var h=E.getLabels(),m={updatePlaceholderProperties:function updatePlaceholderProperties(e,t,n,r){e.file=n,p.convertPropertyNamesFromCamelCase([e]),e.file.ContentSize&&(e.file.Size=e.file.ContentSize);e.file.ParentId&&(e.documentStoreId=e.file.ParentId);e.accountId=r,p.setStatuses(e),e.uploadingFile=!1,t(e)},uploadProgress:function uploadProgress(e,t,n){e.uploadingFile||(e.uploadingFile=!0);e.uploadProgress=n||Math.floor(t.loaded/t.total*100);100==e.uploadProgress&&setTimeout(function(){e.uploadingFile=!1},1200)},getDataTransfer:function getDataTransfer(e){return e.dataTransfer||e.originalEvent.dataTransfer},createFileStagingPlaceholder:function createFileStagingPlaceholder(t,n,o,a){f.createFileStagingPlaceholder().then(function(e){var r=e[0];s.stagedFiles.push(r),r.uploadingFile||(r.uploadingFile=!0),r.fileUploadingText=h.UPLOADING+" "+t.name+c.THREE_PERIODS,p.uploadingToPlaceholder=r,i.uploadContentDocument(t,n,function(e){return!(r.uploadingFile=!1)===e.isExternal?(s.retrieveFileStagingPlaceholders().then(function(){}),void(a&&a())):void f.createDocumentStorageMetadata(e.id,r.recordId,null,p.generateFileMetadata(r,t)).then(function(e){r.file=e,p.prepareForUrls([r]).then(function(){a&&a()})})},function(e,t,n){o.$apply(function(){r.uploadingFile=!1,console.log(e),console.log(t),console.log(n)})},function(e){o.$apply(function(){r.uploadingFile||(r.uploadingFile=!0),r.uploadProgress=Math.floor(e.loaded/e.total*100)})})})},getDateFieldNames:getDateFieldNames,formatDateFieldsForDisplay:function formatDateFieldsForDisplay(e,t){for(var n=0;n<t.length;n++){var r=t[n];e[r]&&(e[r]=convertMillisecondsToDate(e[r]))}},formatDateFieldsForInput:function formatDateFieldsForInput(e,t){for(var n=getDateFieldNames(t),r=0;r<n.length;r++){var o=n[r];e.fields[o]&&(e.fields[o]=formatUTCDateToMilliseconds(new Date(e.fields[o])))}},formatMillisecondsToUTCDate:function formatMillisecondsToUTCDate(e){return e?(e=parseInt(e),window.LifeCycle.Internationalize.format(new Date(parseInt(e)),"zzz")):""},formatUTCDateToMilliseconds:formatUTCDateToMilliseconds,checkForExistingContentDocument:function checkForExistingContentDocument(e){var t=r.defer(),n=null;e.ParentId&&(n=e.ParentId);null!=n?f.isDocStoreShared(n).then(function(e){!0===e&&(n=null),t.resolve([null,n])}):t.resolve([null,n]);return t.promise},performStatusUpdate:function performStatusUpdate(t,n,r){{var o,e;n&&r&&(o=n.status,setElementOpacity(e=document.getElementById("status-btn-"+n.recordId),"0.5"),l.updatePlaceholderStatus(n.recordId,r,function(){var e;r!=o&&(e=h.STATUS_CHANGED_FROM+" "+E.getLabel(o,1)+" "+h.TO_LABEL+" "+E.getLabel(r,1)+c.PERIOD),r.translation===E.getLabel(c.STATUS_EXCEPTION)&&n.portalEnabled&&(e+=" "+h.PORTAL_REJECTION_REASON_CHANGED+" "+n.portalRejectionReason+" "+h.PORTAL_REJECTION_COMMENT_CHANGED+" "+n.portalRejectionComment+c.DOUBLE_QUOTE+c.PERIOD),n.newComment&&(e+="  "+n.newComment),n.newComment=e,f.savePlaceholderData(n.recordId,null,null).then(function(e){!function retrievePlaceholderWithFields(n,r,e){var o=document.getElementById("status-btn-"+r.recordId);l.retrievePlaceholderWithFields(r.recordId,function(t){l.retrievePlaceholderFieldSet(r.recordId,function(e){n.$apply(function(){m.setExceptionDates(t),r.fieldSetSchema=JSON.parse(e),r.fields=t,r.status!==E.getLabel(c.STATUS_EXCEPTION)&&angular.forEach(c.EXCEPTION_DATE_FIELDS,function(e,t){r.fields[t]&&(r.fields[t]=null)}),n.controller.retrieveChatterComments(n.controller.selectedPlaceholder)}),setElementOpacity(o,"1.0")},function(){setElementOpacity(o,"1.0"),r.status=e})},function(){r.status=e})}(t,n,o),p.copyPlaceholderProperties(e[0],n),t.controller.addChatterComment(n),n.file?n.file.previewLoaded=!0:n.file={previewLoaded:!0,previewLink:""},p.setStatuses(n)})},function(){setElementOpacity(e,"1.0"),n.status=o}))}},copyToClipboard:function copyToClipboard(e){var t=!1;if(window.clipboardData&&window.clipboardData.setData)t=clipboardData.setData("Text",e);else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{t=document.execCommand("copy")}finally{document.body.removeChild(n)}}var r=angular.element("button.slds-notify__close");r.css("opacity",0);var o=u.ERROR,e=d.THEME_ERROR,n=d.COPY_ERROR_MSG;t&&(o=u.SUCCESS,e=d.THEME_SUCCESS,n=d.LINK_COPY_SUCCESS_MSG);a.$broadcast(c.SET_TOAST,{type:o,theme:e,body:n}),setTimeout(function(){r.click().css("opacity",1)},1500)},normalizeCompare:function normalizeCompare(e,t){if(e.length&&t.length)return e.toLowerCase()==t.toLowerCase();return!1},setElementOpacity:setElementOpacity,convertMillisecondsToDate:convertMillisecondsToDate,addOffsetAndConvertToDateTime:function addOffsetAndConvertToDateTime(e){return convertMillisecondsToDateTime(function applyAggregateOffset(e,t){return window.LifeCycle.Internationalize.timeZoneUtil.applyAggregateOffset(e,t)}("add",e))},convertMillisecondsToDateTime:convertMillisecondsToDateTime,getDocStoresFromSelectedPlaceholders:function getDocStoresFromSelectedPlaceholders(e){for(var t=[],n=0;n<e.length;n++)e[n].isSelected&&t.push(e[n].documentStoreId);return t},getChatterStatusChangeComment:function getChatterStatusChangeComment(e,t,n){e=e+" "+h.WAS_ADDED+c.PERIOD;t&&t!==n&&(e+=" "+h.STATUS_CHANGED_FROM+" "+E.getLabel(t,1)+" "+h.TO_LABEL+" "+E.getLabel(n,1)+c.PERIOD);return e},setExceptionDates:function setExceptionDates(a){var i=g.formBuilder.fields;angular.forEach(i,function(e,t){var n=i[t];if(n)for(var r=0;r<n.length;r++){var o=n[r];o.fieldName==c.EXCEPTION_DATE_FIELDS[0]?g.formBuilder.fields[t][r].value=a[c.EXCEPTION_DATE_FIELDS[0]]:o.fieldName==c.EXCEPTION_DATE_FIELDS[1]&&(g.formBuilder.fields[t][r].value=a[c.EXCEPTION_DATE_FIELDS[1]])}})}};return m;function getDateFieldNames(e){for(var t=[],n=0;n<e.length;n++)e[n].type===c.DATE_TYPE&&t.push(e[n].fieldPath);return t}function formatUTCDateToMilliseconds(e){return new Date(e).getTime()}function convertMillisecondsToDate(e){return e?(e+=6e4*new Date(e).getTimezoneOffset(),new String(new Date(parseInt(e))).replace('"',"")):null}function convertMillisecondsToDateTime(e){return e?new String(new Date(parseInt(e))).replace('"',""):null}function setElementOpacity(e,t){e&&(e.style.opacity=t)}}angular.module("app").service("commonService",commonService),commonService.$inject=["$rootScope","uploadService","dataService","fileStagingService","CONSTANTS","ALERT_DIALOG","TOAST_TYPES","$filter","$q","universalDocManRemotingService","placeholderService","config","labels","screenSection"]}()},function(e,t){!function(){"use strict";function permissionService(r,n,e,o,t,a,i,l,s){var c=this;c.configValues=l.get();var d=[],u=!1,f=!1,p=!1,E=!1,g=!1,h=!1,m=!1,v=!1,T=!1,P=!1,S=!1,_=!1,C=!1,D=!1,A=!1,I=!1,N=!1,O=!1,L=!1,R=!1,w=!1,U=!1,M=!1,b=!1,F=!1,y=!1,k=!1,V=!1,x=!1,B=!1;return c.userRoleName="",c.userProfileName="",c.userLicenseType="",c.userGroupsList=[],c.userDocTypes=null,{hasCollateralImport:function hasCollateralImport(){return B},hasDeleteFilesPermission:hasDeleteFilesPermission,hasDeletePlaceholderPermission:hasDeletePlaceholderPermission,hasEditAfterApprovalPermission:function hasEditAfterApprovalPermission(e,t,n){return!(isESignLockedPlaceholder(t)&&!n||t==s.getLabel(o.STATUS_APPROVED)&&!E)&&hasPermission(c.configValues.contextObjectType,e)},hasEditDetailsAndCreatePlaceholderPermission:hasEditDetailsAndCreatePlaceholderPermission,hasEditDetailsPermission:hasEditDetailsPermission,hasPermission:hasPermission,hasPortalAdminPermission:hasPortalAdminPermission,hasPrepareForESignature:function hasPrepareForESignature(){return(T||g)&&R},hasProductPackageLevelPermission:hasProductPackageLevelPermission,hasRelationshipImport:function hasRelationshipImport(){return x},hasUniGrantViewerPermission:V,hasRequiredRole:hasRequiredRole,hasRequiredViewerAccess:function hasRequiredViewerAccess(e){var t=[];if(null!=e){if(!function hasRequiredDocType(e){if(null==c.userDocTypes)return!0;e=e&&e.trim().toLowerCase();return 0!==c.userDocTypes.length&&-1<c.userDocTypes.indexOf(e)}(e.category))return!1;null!=e.viewerGroups&&0<e.viewerGroups.trim().length&&t.push(function hasRequiredGroup(e){if(!c.userGroupsList)return!1;for(var t=0;t<c.userGroupsList.length;t++)if(checkListForString(e,c.userGroupsList[t].toLowerCase().trim()))return!0;return!1}(e.viewerGroups)),null!=e.viewerProfiles&&0<e.viewerProfiles.trim().length&&t.push(function hasRequiredProfile(e){return checkListForString(e,c.userProfileName)}(e.viewerProfiles)),null!=e.viewerRoles&&0<e.viewerRoles.trim().length&&t.push(hasRequiredRole(e.viewerRoles))}for(var n=0;n<t.length;n++)if(t[n])return!0;if(isDefaultExternalPermissionsEnabled()&&isExternalUser())return!1;return 0===t.length},getViewerPermissions:function getViewerPermissions(e){var t=[];null!=e.viewerGroups&&0<e.viewerGroups.trim().length&&(t=t.concat(getListFromString(e.viewerGroups)));null!=e.viewerProfiles&&0<e.viewerProfiles.trim().length&&(t=t.concat(getListFromString(e.viewerProfiles)));null!=e.viewerRoles&&0<e.viewerRoles.trim().length&&(t=t.concat(getListFromString(e.viewerRoles)));return t},hasReviewDocumentsPermission:hasReviewDocumentsPermission,initialize:function initialize(e){(function retrieveImportPermissions(){x=l.get().systemPropsMap.get(t.RELATIONSHIP_IMPORT_KEY),B=l.get().systemPropsMap.get(t.COLLATERAL_IMPORT_KEY)})(),setUserGroupsList(c.configValues.userGroupsList),setUserProfileName(c.configValues.userProfileName),setUserLicenseType(c.configValues.userLicenseType),setUserDocTypes(c.configValues.userDocTypes),angular.forEach(e,function(e,t){var n=e;switch(this.push(e),n){case r.APPROVED:0;break;case r.EDIT:0;break;case r.EMPTY_STAGING:0;break;case r.UPLOAD:0;break;case r.UNI_CREATE_PLACEHOLDER_NAME:u=!0;break;case r.UNI_UPDATE_PLACEHOLDER_NAME:f=!0;break;case r.UNI_EDIT_AFTER_APPROVAL:E=!0;break;case r.UNI_EDIT_AND_CREATE_PLACEHOLDERS:g=!0;break;case r.UNI_EDIT_AND_CREATE_LOAN_PLACEHOLDERS:h=!0;break;case r.UNI_EDIT_AND_CREATE_TREASURY_PLACEHOLDERS:m=!0;break;case r.UNI_EDIT_AND_CREATE_DEPOSIT_PLACEHOLDERS:v=!0;break;case r.UNI_EDIT_DETAILS:T=!0;break;case r.UNI_EDIT_LOAN_DETAILS:P=!0;break;case r.UNI_EDIT_TREASURY_DETAILS:S=!0;break;case r.UNI_EDIT_DEPOSIT_DETAILS:_=!0;break;case r.UNI_DELETE:p=!0;break;case r.UNI_DELETE_LOAN_FILES:C=!0;break;case r.UNI_DELETE_TREASURY_FILES:D=!0;break;case r.UNI_DELETE_DEPOSIT_FILES:A=!0;break;case r.UNI_PORTAL_ADMIN:F=!0;break;case r.UNI_LOAN_PORTAL_ADMIN:y=!0;break;case r.UNI_DEPOSIT_PORTAL_ADMIN:k=!0;break;case r.UNI_PREPARE_FOR_E_SIGNATURE:R=!0;break;case r.UNI_REVIEW_DOCUMENTS:w=!0;break;case r.UNI_REVIEW_LOAN_DOCUMENTS:U=!0;break;case r.UNI_REVIEW_TREASURY_DOCUMENTS:M=!0;break;case r.UNI_REVIEW_DEPOSIT_DOCUMENTS:b=!0;break;case r.UNI_DELETE_PLACEHOLDERS:I=!0;break;case r.UNI_DELETE_LOAN_PLACEHOLDERS:L=!0;break;case r.UNI_DELETE_DEPOSIT_PLACEHOLDERS:O=!0;break;case r.UNI_DELETE_TREASURY_PLACEHOLDERS:N=!0;break;case r.UNI_GRANT_VIEWER_PERMISSIONS:V=!0}},d)},isESigPendingCanceledException:function isESigPendingCanceledException(e){e=e?e.toUpperCase():"";return-1<[o.STATUS_SIGNATURE_CANCEL_PENDING.toUpperCase(),o.STATUS_SIGNATURE_PENDING.toUpperCase(),o.STATUS_SIGNATURE_EXCEPTION.toUpperCase()].indexOf(e)},isDefaultExternalPermissionsEnabled:isDefaultExternalPermissionsEnabled,isESignLockedPlaceholder:isESignLockedPlaceholder,isExternalUser:isExternalUser,isLockedPlaceholder:isESignLockedPlaceholder,notHaveViewingRole:function notHaveViewingRole(e){return!hasRequiredRole(e)},setUserGroupsList:setUserGroupsList,setUserProfileName:setUserProfileName,setUserRoleName:function setUserRoleName(e){null!=e&&(c.userRoleName=e.toLowerCase().trim())},setUserDocTypes:setUserDocTypes,setUserLicenseType:setUserLicenseType};function setUserGroupsList(e){c.userGroupsList=e}function setUserProfileName(e){c.userProfileName=e.toLowerCase().trim()}function setUserLicenseType(e){null!=e&&(c.userLicenseType=e.toLowerCase().trim())}function setUserDocTypes(e){if(null!=e){c.userDocTypes=[];for(var t=0;t<e.length;t++)c.userDocTypes.push(e[t].trim().toLowerCase())}else c.userDocTypes=null}function hasPermission(e,t){return e===o.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&null!=i.selectedProductInProductPackage&&(e=i.selectedProductInProductPackage.objectType)===o.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE?hasProductPackageLevelPermission(t):evaluatePermission(e,t)}function evaluatePermission(e,t){if(t===n.UNI_EDIT_AND_CREATE_PLACEHOLDERS)return hasEditDetailsAndCreatePlaceholderPermission(e);if(t===n.UNI_EDIT_DETAILS)return hasEditDetailsPermission(e);if(t===n.UNI_DELETE)return hasDeleteFilesPermission(e);if(t===n.UNI_PORTAL_ADMIN)return hasPortalAdminPermission(e);if(t===n.UNI_REVIEW_DOCUMENTS)return hasReviewDocumentsPermission(e);if(t===n.UNI_DELETE_PLACEHOLDERS)return hasDeletePlaceholderPermission(e);switch(t){case n.UNI_CREATE_PLACEHOLDER_NAME:return u;case n.UNI_UPDATE_PLACEHOLDER_NAME:return f;case n.UNI_GRANT_VIEWER_PERMISSIONS:return V;default:return!1}}function hasProductPackageLevelPermission(e){for(var t=!1,n=i.productPackageProducts,r=0;r<n.length;r++)if(evaluatePermission(n[r].objectType,e)){t=!0;break}return t}function hasDeletePlaceholderPermission(e){return!!e&&(!!I||(e===o.CONTEXT_OBJECT_TYPE_ACCOUNT?L||N||O:e===o.CONTEXT_OBJECT_TYPE_LOAN||e===o.CONTEXT_OBJECT_TYPE_COLLATERAL?L:e===o.CONTEXT_OBJECT_TYPE_TREASURY?N:e===o.CONTEXT_OBJECT_TYPE_DEPOSIT&&O))}function hasEditDetailsAndCreatePlaceholderPermission(e){return!!e&&(!!g||(e===o.CONTEXT_OBJECT_TYPE_ACCOUNT?g||h||v||m:e===o.CONTEXT_OBJECT_TYPE_LOAN||e===o.CONTEXT_OBJECT_TYPE_COLLATERAL?h:e===o.CONTEXT_OBJECT_TYPE_TREASURY?m:e===o.CONTEXT_OBJECT_TYPE_DEPOSIT&&v))}function hasEditDetailsPermission(e){return!!e&&(!(!T&&!hasEditDetailsAndCreatePlaceholderPermission(e))||(e===o.CONTEXT_OBJECT_TYPE_ACCOUNT?T||P||_||S:e===o.CONTEXT_OBJECT_TYPE_LOAN||e===o.CONTEXT_OBJECT_TYPE_COLLATERAL?P:e===o.CONTEXT_OBJECT_TYPE_TREASURY?S:e===o.CONTEXT_OBJECT_TYPE_DEPOSIT&&_))}function hasDeleteFilesPermission(e){return!!e&&(!!p||(e===o.CONTEXT_OBJECT_TYPE_ACCOUNT?p||C||A||D:e===o.CONTEXT_OBJECT_TYPE_LOAN||e===o.CONTEXT_OBJECT_TYPE_COLLATERAL?C:e===o.CONTEXT_OBJECT_TYPE_TREASURY?D:e===o.CONTEXT_OBJECT_TYPE_DEPOSIT&&A))}function hasReviewDocumentsPermission(e){return!!e&&(!!w||(e===o.CONTEXT_OBJECT_TYPE_ACCOUNT?w||U||b||M:e===o.CONTEXT_OBJECT_TYPE_LOAN||e===o.CONTEXT_OBJECT_TYPE_COLLATERAL?U:e===o.CONTEXT_OBJECT_TYPE_TREASURY?M:e===o.CONTEXT_OBJECT_TYPE_DEPOSIT&&b))}function hasPortalAdminPermission(e){return!!e&&(!!F||(e===o.CONTEXT_OBJECT_TYPE_ACCOUNT?y||k:e===o.CONTEXT_OBJECT_TYPE_LOAN?y:e===o.CONTEXT_OBJECT_TYPE_DEPOSIT&&k))}function getListFromString(e){for(var t=e.split(";"),n=0;n<t.length;n++)t[n]=t[n].trim().toLowerCase();return t}function hasRequiredRole(e){return checkListForString(e,c.userRoleName)}function checkListForString(e,t){return null==e||""===e||(!(0<(e=e.trim()).length)||(0<e.indexOf(";")?-1<e.toLowerCase().replace(/\s*;\s*/g,";").split(";").indexOf(t):e.toLowerCase().trim()===t))}function isExternalUser(){return[e.EXTERNAL_APPS.toLowerCase(),e.CUSTOMER_COMMUNITY.toLowerCase(),e.CUSTOMER_COMMUNITY_PLUS.toLowerCase(),e.PARTNER_COMMUNITY.toLowerCase(),e.CHANNEL_ACCOUNT.toLowerCase()].includes(c.userLicenseType)}function isDefaultExternalPermissionsEnabled(){return l.get().systemPropsMap.get(t.EXTERNAL_PLACEHOLDER_DEFAULTS)}function isESignLockedPlaceholder(e){e=e?e.toUpperCase():"";return-1<[o.STATUS_SIGNATURE_CANCEL_PENDING.toUpperCase(),o.STATUS_SIGNATURE_EXCEPTION.toUpperCase(),o.STATUS_SIGNATURE_NEEDED.toUpperCase(),o.STATUS_SIGNATURE_PENDING.toUpperCase(),o.STATUS_SIGNATURE_READY_TO_TAG.toUpperCase(),o.STATUS_SIGNATURE_UPLOADING.toUpperCase()].indexOf(e)}}angular.module("app").service("permissionService",permissionService),permissionService.$inject=["PERMISSION_NAMES","PERMISSIONS","COMMUNITY_USER_LICENSE_NAMES","CONSTANTS","SYSTEM_PROPERTIES","universalDocManRemotingService","productPackageService","config","labels"]}()},function(e,t){!function(){"use strict";function placeholderService(o,a,r,i,l,t,s,c,d,u,f,p,e){var E={placeholders:[],placeholderApexTypeToApiNameMap:[],signedStatus:s.get().systemPropsMap.get(c.UNI_ESIGN_SIGNED_STATUSES),statusLists:[],statusTheme:[],uploadingToPlaceholder:{},isTranslated:null,buildImageUrls:function buildImageUrls(e){for(var t=a.defer(),n=0;n<Object.keys(e).length;n++){var r=e[Object.keys(e)[n]];r.file.previewUnavailable=!1,r.file.isPreviewSupported=E.isPreviewSupported(r.file.FileType),r.file.isPreviewSupported?(r.file.previewLink=d.CONTENT_PREVIEW_URL+r.file.Id,r.file.FileExtension&&-1!==u.indexOf(r.file.FileExtension.toLowerCase())?r.file.enlargedPreviewLink=d.CONTENT_ENLARGED_PREVIEW_URL_IMAGES_PART_1+r.file.Id+d.CONTENT_ENLARGED_PREVIEW_URL_IMAGES_PART_2:r.file.enlargedPreviewLink=d.CONTENT_ENLARGED_PREVIEW_URL+r.file.Id+d.CONTENT_ENLARGED_PREVIEW_URL_CONTENTID+r.file.Id+d.CONTENT_ENLARGED_PREVIEW_URL_CURRENTTIME+o.currentTime):r.file.previewUnavailable=!0,sendPreviewLinkURLRequest(r.file.previewLink),sendPreviewLinkURLRequest(r.file.enlargedPreviewLink)}return t.resolve(),t.promise},copyPlaceholderProperties:function copyPlaceholderProperties(e,t){{if(!e||!t)return!1;convertPropertyNamesFromCamelCase([e,t]);for(var n,r=c.WORKFLOW_UPDATE_FIELDS,o="",a=0;a<c.WORKFLOW_UPDATE_FIELDS_PREFIX_NEEDED.length;a++)r.push(window.UniDocMan.namespacePrefix+c.WORKFLOW_UPDATE_FIELDS_PREFIX_NEEDED[a]);if(null!=t.fieldSetSchema)for(a=0;a<t.fieldSetSchema.length;a++){var i=t.fieldSetSchema[a].fieldPath;if(-1<r.indexOf(i)){o=i;break}}for(n in t)t.hasOwnProperty(n)&&e.hasOwnProperty(n)&&(n===c.YEAR_KEY&&""!=e[n]&&""==t[n]&&t.fields&&(t.fields[o]=e[n]),t[n]=e[n])}},convertPropertyNamesFromCamelCase:convertPropertyNamesFromCamelCase,generateFileMetadata:function generateFileMetadata(e,t){e.fileName=t.name,e.fileSize=t.size,e.mimeType=""===t.type?c.EXTENSION_NATIVE_MIME_TYPE[e.fileName.substring(e.fileName.lastIndexOf(".")+1)]||"":t.type;var n={},r=c.FILE_NAME_CLASSIC,o=c.FILE_SIZE_CLASSIC,a=c.FILE_MIME_TYPE_CLASSIC;e.apexType==c.NAMESPACE_PREFIX+"."+c.CONTEXT_OBJECT_UNIVERSAL_DOC&&(r=c.FILE_NAME_UNIVERSAL,o=c.FILE_SIZE_UNIVERSAL,a=c.FILE_MIME_TYPE_UNIVERSAL);return n[E.placeholderApexTypeToApiNameMap[e.apexType]]={},n[E.placeholderApexTypeToApiNameMap[e.apexType]][r]=t.name,n[E.placeholderApexTypeToApiNameMap[e.apexType]][o]=t.size,n[E.placeholderApexTypeToApiNameMap[e.apexType]][a]=e.mimeType,JSON.stringify(n)},isPreviewSupported:function isPreviewSupported(e){return-1!==d.PREVIEW_SUPPORTED_EXTENSIONS.indexOf(e)},loadRejectionReasonPicklistValues:function loadRejectionReasonPicklistValues(e){var t=a.defer(),n=e.indexOf(".")+1,e=c.PLACEHOLDER_APEX_TYPE_TO_API_NAME[e.substring(n,e.length)];return r.retrieveDependentPicklist(e,c.REJECTION_REASON_FIELD,UniDocMan.namespacePrefix+c.REJECTION_COMMENT_FIELD).then(function(e){var n=[],r=0;angular.forEach(e,function(e,t){e={id:r,reason:t,comment:e[0]};n.push(e),r++}),t.resolve(n),l.picklistValues=n}),t.promise},placeholderHasFileOrExternal:function placeholderHasFileOrExternal(e){var t=!1;e&&(e.file&&void 0!==e.file.Id&&e.file.Id||e.documentStorageType&&e.isDocumentExternal)&&(t=!0);return t},populateStatusObjects:populateStatusObjects,prepareForUrls:function prepareForUrls(e){if(e&&0<e.length){E.convertPropertyNamesFromCamelCase(e);for(var t,n=[],r=0;r<e.length;r++)(t=e[r]).file&&t.file.FileType&&t.file.ParentId&&(n[t.file.ParentId]=t);if(0<Object.keys(n).length)return E.buildImageUrls(n)}var o=a.defer();return o.resolve(),o.promise},retrievePlaceholders:function retrievePlaceholders(){var t=a.defer();return a.all([r.retrieveDocuments(),r.getReviewStatusOptions()]).then(function(e){p.setLabels(e[1]),populateStatusObjects(),E.placeholders=e[0],E.convertPropertyNamesFromCamelCase(E.placeholders),E.placeholders&&angular.forEach(E.placeholders,function(e,t){E.setStatuses(e)}),t.resolve()}),t.promise},retrieveIsTranslated:function retrieveIsTranslated(){{if(null!==E.isTranslated)return new Promise(function(e,t){e()});var t=a.defer();return r.retrieveIsTranslated().then(function(e){E.isTranslated=e,t.resolve()}),t.promise}},sendPreviewLinkURLRequest:sendPreviewLinkURLRequest,setStatuses:function setStatuses(e){var t=!1;e.placeholderApprovalRoles&&!i.hasRequiredRole(e.placeholderApprovalRoles)||(t=!0);var n=strToUpper(e.status);p.getLabel(n)?e.statusTranslation=p.getLabel(n):e.statusTranslation=e.status;e.file&&e.file.Id||e.isDocumentExternal?n===strToUpper(c.STATUS_SIGNATURE_NEEDED)?setStatusListValue(e,f.E_SIGNATURE):n===strToUpper(c.STATUS_SIGNATURE_PENDING)?setStatusListValue(e,f.E_SIGNATURE_PENDING):n===strToUpper(c.STATUS_SIGNATURE_CANCEL_PENDING)?setStatusListValue(e,f.STATUS_SIGNATURE_CANCEL_PENDING):n===strToUpper(c.STATUS_SIGNATURE_EXCEPTION)?setStatusListValue(e,f.STATUS_SIGNATURE_EXCEPTION):n===strToUpper(c.STATUS_SIGNATURE_READY_TO_TAG)?setStatusListValue(e,c.STATUS_SIGNATURE_READY_TO_TAG):n===strToUpper(c.STATUS_SIGNATURE_UPLOADING)?setStatusListValue(e,c.STATUS_SIGNATURE_UPLOADING):e.status===E.signedStatus?setStatusListValue(e,t?f.HAS_FILE_SIGNED_AND_APPROVAL_ROLE:f.HAS_FILE_SIGNED):setStatusListValue(e,t?f.HAS_PLACEHOLDER_APPROVAL_ROLE:f.HAS_FILE):setStatusListValue(e,f.NO_FILE)},setStatusTheme:function setStatusTheme(e){var t=E.statusTheme[e.status];null==t&&(strToUpper(e.status)===strToUpper(c.STATUS_SIGNATURE_PENDING)?t=E.statusTheme[c.STATUS_SIGNATURE_PENDING]:strToUpper(e.status)===strToUpper(c.STATUS_SIGNATURE_NEEDED)?t=E.statusTheme[c.STATUS_SIGNATURE_NEEDED]:strToUpper(e.status)===strToUpper(c.STATUS_SIGNATURE_CANCEL_PENDING)?t=E.statusTheme[c.STATUS_SIGNATURE_CANCEL_PENDING]:strToUpper(e.status)===strToUpper(c.STATUS_SIGNATURE_EXCEPTION)&&(t=E.statusTheme[c.STATUS_SIGNATURE_EXCEPTION]),null==t&&(t=E.statusTheme[e.recordId]));return t},setVersionHistory:function setVersionHistory(t){var n=a.defer();t&&t.recordId?r.getDocumentVersions(t.recordId).then(function(e){t.versions=e,E.convertPropertyNamesFromCamelCase(t.versions),n.resolve()}):n.reject();return n.promise},strToUpper:strToUpper,translatableOrSpecialFieldType:function translatableOrSpecialFieldType(e){return(e=e.toLowerCase())==c.DATE_TYPE||e==c.DATETIME_TYPE||e==c.NUMBER_FIELD_TYPE||e==c.PERCENT_FIELD_TYPE||e==c.CURRENCY_FIELD_TYPE||e==c.URL_FIELD_TYPE},containsHyperlink:function containsHyperlink(e,t,n){if(e&&e.indexOf&&-1<e.indexOf("</a>")&&(t=(t=t.split("."))[t.length-1],n&&n.filter)){n=n.filter(function(e){return e.fieldPath==t});if(n&&n.length&&1===n.length)return n[0].isFormula}return!1},uncheckAllPlaceholders:function uncheckAllPlaceholders(){o.$$childTail.$$childTail.toggleState=!1,angular.forEach(E.placeholders,function(e,t){i.hasRequiredViewerAccess(e)&&(e.isSelected=!1)})},getContentDocumentByVersion:r.getContentDocumentByVersion,setPreviewConfiguration:r.setPreviewConfiguration,getBulkUpdateScreenSectionData:r.getBulkUpdateScreenSectionData,updateRequirementRemote:r.updateRequirementRemote,unlinkRequirementFromPlaceholder:r.unlinkRequirementFromPlaceholder};return function setPlaceholderApexTypeToApiNameMap(){var e=c.NAMESPACE_PREFIX+c.PERIOD;E.placeholderApexTypeToApiNameMap[e+c.CONTEXT_OBJECT_ACCOUNT_DOC]=c.ACCOUNT_DOC_API_NAME,E.placeholderApexTypeToApiNameMap[e+c.CONTEXT_OBJECT_LOAN_DOC]=c.LOAN_DOC_API_NAME,E.placeholderApexTypeToApiNameMap[e+c.CONTEXT_OBJECT_UNIVERSAL_DOC]=c.DOCUMENT_PLACEHOLDER_API_NAME}(),E;function setStatusListValue(e,t){var n,r=!1;E.statusLists[t]&&(n=E.statusLists[t].length);for(var o=0;o<n;o++)if(e.status&&strToUpper(E.statusLists[t][o].name)===strToUpper(e.status)){r=!0;break}!r&&n?(E.statusLists[e.recordId]=E.statusLists[t].slice(),E.statusLists[e.recordId].push({name:e.status,theme:"slds-theme--shade",translation:p.getLabel(e.status)}),E.statusTheme[e.recordId]="slds-theme--shade",e.statusListValue=e.recordId):e.statusListValue=t}function populateStatusObjects(){var n={};n[c.STATUS_SIGNATURE_NEEDED]="slds-theme--warning",n[c.STATUS_SIGNATURE_PENDING]="slds-theme--info",n[c.STATUS_SIGNATURE_CANCEL_PENDING]="slds-theme--warning",n[c.STATUS_SIGNATURE_EXCEPTION]="slds-theme--error",n[E.signedStatus]="slds-theme--alt-inverse",n[c.STATUS_REVIEWED]="slds-theme--alt-inverse",n[c.STATUS_OPEN]="slds-theme--default openStatusIcon",n[c.STATUS_APPROVED]="slds-theme--success",n[c.STATUS_IN_FILE]="slds-theme--warning",n[c.STATUS_EXCEPTION]="slds-theme--error",n[c.STATUS_WAIVED]="",n[c.STATUS_SIGNATURE_UPLOADING]="uploading-status-theme",n[c.STATUS_SIGNATURE_READY_TO_TAG]="ready-to-tag-status-theme",n[c.STATUS_AWAITING_REVIEW]="slds-badge_inverse";var r={};r[f.NO_FILE]=[c.STATUS_EXCEPTION,c.STATUS_OPEN,c.STATUS_WAIVED],r[f.E_SIGNATURE]=[c.STATUS_EXCEPTION,c.STATUS_IN_FILE,c.STATUS_WAIVED],r[f.E_SIGNATURE_PENDING]=[c.STATUS_SIGNATURE_PENDING],r[f.STATUS_SIGNATURE_CANCEL_PENDING]=[c.STATUS_SIGNATURE_CANCEL_PENDING],r[f.STATUS_SIGNATURE_EXCEPTION]=[c.STATUS_SIGNATURE_EXCEPTION],r[f.HAS_FILE]=[c.STATUS_IN_FILE,c.STATUS_EXCEPTION,c.STATUS_REVIEWED,c.STATUS_WAIVED],r[f.HAS_FILE_SIGNED]=[E.signedStatus,c.STATUS_IN_FILE,c.STATUS_EXCEPTION,c.STATUS_REVIEWED,c.STATUS_WAIVED],r[f.HAS_FILE_SIGNED_AND_APPROVAL_ROLE]=[E.signedStatus,c.STATUS_APPROVED,c.STATUS_IN_FILE,c.STATUS_EXCEPTION,c.STATUS_REVIEWED,c.STATUS_WAIVED],r[f.HAS_PLACEHOLDER_APPROVAL_ROLE]=[c.STATUS_IN_FILE,c.STATUS_APPROVED,c.STATUS_EXCEPTION,c.STATUS_REVIEWED,c.STATUS_WAIVED],r[c.STATUS_SIGNATURE_UPLOADING]=[],r[c.STATUS_SIGNATURE_READY_TO_TAG]=[];var e=s.get().contextObjectType===c.CONTEXT_OBJECT_TYPE_LOAN?s.get().loanDocumentReviewStatuses:s.get().contextObjectType===c.CONTEXT_OBJECT_TYPE_ACCOUNT?s.get().accountDocumentReviewStatuses:s.get().contextObjectType===c.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&t.selectedProductInProductPackage&&t.selectedProductInProductPackage.objectType===c.CONTEXT_OBJECT_TYPE_LOAN?s.get().loanDocumentReviewStatuses:s.get().universalDocumentReviewStatuses,o=[];angular.forEach(e,function(e,t){c.DEFAULT_STATUSES.indexOf(e)<0&&(o.push({name:e,theme:"slds-theme--alt-inverse",translation:p.getLabel(e)}),n[e]="slds-theme--alt-inverse")}),0<o.length&&angular.forEach(r,function(n,e){angular.forEach(o,function(e,t){n.push(e.name)})}),Object.keys(r).forEach(function(t){E.statusLists[t]=[],Object.keys(n).forEach(function(e){E.statusTheme[e]=n[e],-1!=r[t].indexOf(e)&&(E.statusLists[t].push({name:e,theme:n[e],translation:p.getLabel(e)}),(e=E.statusLists[t].slice(0)).sort(function(e,t){return e.translation&&t.translation?e.translation.toLowerCase().localeCompare(t.translation.toLowerCase()):e.name.toLowerCase().localeCompare(t.name.toLowerCase())}),E.statusLists[t]=e)})})}function strToUpper(e){return null!=e?e.toUpperCase():""}function sendPreviewLinkURLRequest(e){jQuery("#docmanapp").append('<img id="hiddenImage" hidden="hidden" src="/>'),jQuery("#hiddenImage").attr("src",e),jQuery("#hiddenImage").remove()}function convertPropertyNamesFromCamelCase(e){angular.forEach(e,function(e){e.file&&e.file.recordType?mapObjectProperties(e.file):e.recordType&&mapObjectProperties(e)})}function mapObjectProperties(n){angular.forEach(e,function(e,t){n.hasOwnProperty(t)&&(Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(n,t)),delete n[t])})}}angular.module("app").service("placeholderService",placeholderService),placeholderService.$inject=["$rootScope","$q","universalDocManRemotingService","permissionService","picklistValueService","productPackageService","config","CONSTANTS","FILE","IMAGE_FILE_EXTENSIONS","STATUS_LIST","labels","DOCUMENT_VERSION_PROPERTY_MAP"]}()},function(e,t){!function(){"use strict";function productPackageService(t,n){var r={productPackageProducts:[],selectedProductInProductPackage:null,productPackageDocManWithoutProducts:!1,setProductPackageProducts:function setProductPackageProducts(e){e.LLC_BI__Product_Package__c&&(r.productPackageProducts=e.LLC_BI__Product_Package__c);t.get().includeProductPackageDocMan===n.STRING_VALUE_FALSE&&r.productPackageProducts.splice(0,1);0<r.productPackageProducts.length?(r.selectedProductInProductPackage=r.productPackageProducts[0],window.DocManId=e.LLC_BI__Product_Package__c[0].recordId,jQuery("#placeholderSearchBar").removeClass("col-xs-12"),jQuery("#placeholderSearchBar").addClass("col-xs-8")):r.productPackageDocManWithoutProducts=!0}};return r}angular.module("app").service("productPackageService",productPackageService),productPackageService.$inject=["config","CONSTANTS"]}()},function(e,t){!function(){"use strict";function documentManagerSearchFilter(e){return function(e,t){if(!t)return e;var n,r=[],o=(""+t).toLowerCase();return angular.forEach(e,function(e){(n=angular.copy(e)).apexType="",-1!==(""+JSON.stringify(n)).toLowerCase().indexOf(o)&&r.push(e)}),r}}function placeholderViewerRolesFilter(n){return function(e,t){return e.filter(function(e){return!(t||n.isDefaultExternalPermissionsEnabled()&&n.isExternalUser())||n.hasRequiredViewerAccess(e)})}}angular.module("app").filter("portalEnabledFilter",function portalEnabledFilter(){return function(e,t){return e.filter(function(e){if(!t||e.portalEnabled)return!0})}}).filter("readyForEsignatureFilter",function readyForEsignatureFilter(){return function(e,t){return e.filter(function(e){if(!t||e.readyForEsignature)return!0})}}).filter("documentManagerSearchFilter",documentManagerSearchFilter).filter("categoriesFilter",function categoriesFilter(){return function(e,t){if(0===t.length)return e;var n=[];return angular.forEach(e,function(e){-1!==t.indexOf(e.category)&&n.push(e)}),n}}).filter("placeholderViewerRolesFilter",placeholderViewerRolesFilter),documentManagerSearchFilter.$inject=["CONSTANTS"],placeholderViewerRolesFilter.$inject=["permissionService"]}()},function(e,t){!function(){"use strict";function fileStagingService(e,n,r){var o=this;return o.service={stagedFiles:[],retrieveFileStagingPlaceholders:function retrieveFileStagingPlaceholders(){var t=e.defer();return n.retrieveFileStagingPlaceholders(function(e){r.prepareForUrls(e).then(function(){o.service.stagedFiles=e,t.resolve()})}),t.promise}},o.service}angular.module("app").service("fileStagingService",fileStagingService),fileStagingService.$inject=["$q","dataService","placeholderService"]}()},function(e,t){!function(){"use strict";function eSignatureService(a,s,c,r,e,i,o,l,d,u){return{sendESignatureDocuments:sendESignatureDocuments,cancelAllESignatureCollections:cancelAllESignatureCollections,cancelESignatureCollection:function cancelESignatureCollection(e,t){var n=d.ERROR,r=l.THEME_ERROR,o=l.ERROR_MSG;t[0]&&t[0].documentCollectionId&&(cancelCollectionAndUpdateStatus(t[0].documentCollectionId,t,e),n=d.SUCCESS,r=l.THEME_SUCCESS,o=l.E_SIGNATURE_CANCEL_SENT_SUCCESS_MSG);a.$broadcast(s.SET_TOAST,{type:n,theme:r,body:o})},confirmCancelAllESignatureCollections:function confirmCancelAllESignatureCollections(t){a.alert={isRendered:!0,theme:l.THEME_WARNING,label:{heading:l.E_SIGNATURE_CANCEL_LABEL,message:l.E_SIGNATURE_CONFIRM_CANCEL,confirm:l.E_SIGNATURE_YES_CANCEL_BTN,cancel:l.E_SIGNATURE_NO_CANCEL_BTN},confirm:function(e){if(a.alert.isRendered=!1,e)return cancelAllESignatureCollections(t)}}},resendESignature:function resendESignature(t){a.alert={isRendered:!0,theme:l.THEME_WARNING,label:{heading:l.E_SIGNATURE_SEND_LABEL,message:l.E_SIGNATURE_CONFIRM_RESEND,confirm:l.OK_BTN,cancel:l.CANCEL_BTN},confirm:function(e){a.alert.isRendered=!1,e&&sendESignatureDocuments(t).then(function(e){var t=d.ERROR,n=l.THEME_ERROR,r=l.ERROR_MSG;e&&(t=d.SUCCESS,n=l.THEME_SUCCESS,r=l.E_SIGNATURE_SENT_SUCCESS_MSG),a.$broadcast(s.SET_TOAST,{type:t,theme:n,body:r})})}}},getESignatureNonActiveStatuses:function getESignatureNonActiveStatuses(){return[s.STATUS_SIGNATURE_CANCEL_PENDING.toUpperCase(),s.STATUS_SIGNATURE_EXCEPTION.toUpperCase(),s.STATUS_SIGNATURE_PENDING.toUpperCase(),s.STATUS_SIGNED.toUpperCase()]}};function sendESignatureDocuments(t,n){for(var e,r=[],o=u.defer(),a=!1,i=0;i<t.length;i++){var l=t[i];l.isSelected&&l.status&&l.status.toLowerCase()===s.STATUS_SIGNATURE_NEEDED.toLowerCase()&&(r.push(l.documentStoreId),a=l.docPrepPrepared,e=l.documentCollectionId)}return a?c.createCollection(r).then(function(e){e?o=sendCollection(o,t,e,n):o.reject(s.ERROR_EVENT)}):e?o=sendCollection(o,t,e,n):o.reject(s.ERROR_EVENT),o.promise}function sendCollection(t,n,r,e){return c.sendCollection(r,e).then(function(e){e?(angular.forEach(n,function(e,t){e.isSelected&&e.status&&e.status.toLowerCase()===s.STATUS_SIGNATURE_NEEDED.toLowerCase()&&(e.documentCollectionId=r)}),t.resolve(s.SENT)):t.reject(s.ERROR_EVENT)}),t}function cancelCollectionAndUpdateStatus(e,t,n){n.controller&&(n.controller.showEsignatureCollectionDetailModal=!1),c.cancelSignatureCollection(e).then(function(e){e&&angular.forEach(t,function(t){o.isESigPendingCanceledException(t.status)&&angular.forEach(e,function(e){t.documentStoreId===e&&r.performStatusUpdate(n,t,s.STATUS_SIGNATURE_CANCEL_PENDING)})})})}function cancelAllESignatureCollections(o){var t=[];angular.forEach(i.placeholders,function(e){t.push(e.documentStoreId)}),c.getCollectionIds(t).then(function(e){var t=d.ERROR,n=l.THEME_ERROR,r=l.ERROR_MSG;e&&(angular.forEach(e,function(e){cancelCollectionAndUpdateStatus(e,i.placeholders,o)}),t=d.SUCCESS,n=l.THEME_SUCCESS,r=l.E_SIGNATURE_CANCEL_SENT_SUCCESS_MSG),a.$broadcast(s.SET_TOAST,{type:t,theme:n,body:r})})}}angular.module("app").service("eSignatureService",eSignatureService),eSignatureService.$inject=["$rootScope","CONSTANTS","universalDocManRemotingService","commonService","eSignatureNotificationService","placeholderService","permissionService","ALERT_DIALOG","TOAST_TYPES","$q"]}()},function(e,t){!function(){"use strict";function eSignatureNotificationService(o){var a=this;a.pendingUpdates=0,a.updateThrottle,function registerESignatureNotification(){UniDocMan.esignatureNotification||(UniDocMan.esignatureNotification=function(e){var t=!1;if(e&&e.data&&e.data.sobject)for(var n=e.data.sobject.LLC_BI__Document_Store__c,r=0;r<o.placeholders.length;r++)o.placeholders[r].documentStoreId===n&&(t=!0);t&&function throttleRetrievePlaceholders(){a.pendingUpdates?(a.pendingUpdates++,clearTimeout(a.updateThrottle),a.updateThrottle=setTimeout(o.retrievePlaceholders().then(function(){a.pendingUpdates--}),500)):(a.pendingUpdates++,o.retrievePlaceholders().then(function(){a.pendingUpdates--}))}()})}()}angular.module("app").service("eSignatureNotificationService",eSignatureNotificationService),eSignatureNotificationService.$inject=["placeholderService"]}()},function(e,t){!function(){"use strict";function eSignaturePreparationService(t,a,i,n,l){return{fireErrorMessage:fireErrorMessage,validateDocuments:validateDocuments,validateDocumentsForSend:function validateDocumentsForSend(e){return validateDocuments(e)&&function validateCollectionIds(e){var t={};if(e)for(var n=0;n<e.length;n++)!function checkStatusForSend(e,t){e.status&&e.status.toLowerCase()===a.STATUS_SIGNATURE_NEEDED.toLowerCase()||(t[e.name]||(t[e.name]=[]),t[e.name].push(i.E_SIGNATURE_SEND_STATUS_ERROR))}(e[n],t),Object.keys(t).length||function checkCollectionForSend(e,t,n){e.documentCollectionId&&t.documentCollectionId&&e.documentCollectionId===t.documentCollectionId||(n[t.name]||(n[t.name]=[]),n[t.name].push(i.E_Signature_Different_Collection_Error))}(e[0],e[n],t);if(Object.keys(t).length)return fireErrorMessage(t),!1;return!0}(e)},getReadyForTaggingCollectionId:function getReadyForTaggingCollectionId(e){var t=[a.STATUS_SIGNATURE_NEEDED.toLowerCase(),a.STATUS_SIGNATURE_READY_TO_TAG.toLowerCase()],n=e.filter(function(e){return e.isSelected&&e.documentCollectionId&&!e.docPrepPrepared&&-1!==t.indexOf(e.status.toLowerCase())});if(!n||0===n.length)return"";var r=n[0].documentCollectionId;return 0===e.filter(function(e){return e.documentCollectionId&&e.documentCollectionId===r&&-1===t.indexOf(e.status.toLowerCase())||e.isSelected&&!e.documentCollectionId}).length?r:""}};function validateDocuments(e){for(var t={},n=!1,r=0;r<e.length;r++){var o=e[r];o.isSelected&&(n=!0,function checkFileSize(e,t){e.fileSize>=l.ESIGNATURE_MAX_FILE_SIZE&&(t[e.name]||(t[e.name]=[]),t[e.name].push(i.E_SIGNATURE_FILE_SIZE_EXCEEDED))}(o,t),function checkStatus(e,t){var n=[a.STATUS_IN_FILE.toLowerCase(),a.STATUS_SIGNATURE_NEEDED.toLowerCase(),a.STATUS_SIGNATURE_READY_TO_TAG.toLowerCase()];e.status&&-1!==n.indexOf(e.status.toLowerCase())||(t[e.name]||(t[e.name]=[]),t[e.name].push(i.E_SIGNATURE_STATUS_ERROR))}(o,t),function checkExtension(e,t){var n=a.ESIGNATURE_ALLOWED_FILE_TYPES;e.file.FileExtension&&-1!==n.indexOf(e.file.FileExtension.toLowerCase())||(t[e.name]||(t[e.name]=[]),t[e.name].push(i.E_SIGNATURE_FILE_TYPE_ERROR))}(o,t),function checkDocPrepPrepared(e,t){e.docPrepPrepared&&(t[e.name]||(t[e.name]=[]),t[e.name].push(i.E_SIGNATURE_DOC_PREP_ERROR))}(o,t))}return Object.keys(t).length?(fireErrorMessage(t),!1):n}function fireErrorMessage(e){t.$broadcast(a.SET_TOAST,{type:n.ERROR,theme:i.THEME_ERROR,body:function formatErrorMessage(e){for(var t="",n=Object.keys(e),r=0;r<n.length;r++){for(var o=e[n[r]],a=0;a<o.length;a++)t+=0===a?n[r]+": "+o[a]:" "+o[a]+" ";n[r+1]&&(t+="\n\n")}return t}(e)})}}angular.module("app").service("eSignaturePreparationService",eSignaturePreparationService),eSignaturePreparationService.$inject=["$rootScope","CONSTANTS","ALERT_DIALOG","TOAST_TYPES","FILE"]}()},function(e,t){!function(){"use strict";function browserDetectService(e,t){return{detectIE:function detectIE(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){var n=e.indexOf("rv:");return parseInt(e.substring(n+3,e.indexOf(".",n)),10)}n=e.indexOf("Edge/");if(0<n)return parseInt(e.substring(n+5,e.indexOf(".",n)),10);return!1}}}angular.module("app").service("browserDetectService",browserDetectService),browserDetectService.$inject=["CONSTANTS","$q"]}()},function(e,t){!function(){"use strict";angular.module("app").service("ndsFormService",function ndsFormService(){function normalizeAttributes(e){for(var t={},n=Object.keys(e),r=0,o=n.length;r<o;r++){var a=n[r],i=e[a];if("[object Object]"===Object.prototype.toString.call(i))for(var l=Object.keys(i),s=0,c=l.length;s<c;s++){var d=l[s];t[a+"."+d]=i[d]}else t[a]=e[a]}return t}return{adjustFieldSetMetadata:function adjustFieldSetMetadata(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];"BOOLEAN"===r.fieldType&&(r.showToggle=!1)}return e},placeholderToEntity:function placeholderToEntity(e){return{identity:e.recordId,attributes:normalizeAttributes(e.fields)}},normalizeAttributes:normalizeAttributes}})}()},function(e,t){!function(){"use strict";angular.module("app").provider("docManConfig",function Config(){var n=this;function replaceAll(e,t,n){return e.replace(new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function htmlDecodeRecursive(e){if("string"==typeof e||e instanceof String)return function htmlDecode(e){e=replaceAll(e,"\\'","'"),e=replaceAll(e,"\\&quot;",'"'),e=replaceAll(e,"\\\\","\\");var n={amp:"&",lt:"<",gt:">",quot:'"'};return e=e.replace(/&(#(?:x[0-9a-f]+|\d+)|[a-z]+);?/gi,function(e,t){return"#"===t[0]?String.fromCharCode("x"===t[1].toLowerCase()?parseInt(t.substr(2),16):parseInt(t.substr(1),10)):n.hasOwnProperty(t)?n[t]:e})}(e);for(var t in e)e.hasOwnProperty(t)&&(e[t]=htmlDecodeRecursive(e[t]));return e}n.config={},n.$get=function(e){return{get:function(){return n.config}}},n.set=function(e){n.config=angular.merge(n.config,e)},n.setHtmlEncoded=function(e){for(var t in e)e.hasOwnProperty(t)&&(n.config[t]=htmlDecodeRecursive(e[t]))}})}()},function(e,t){!function(){"use strict";angular.module("app").provider("labels",function Labels(){var r=this;r.labels={},r.$get=function(){return{getLabels:function(){return r.labels},getLabel:function(e,t){var n=e.replace(/-|\s/g,"_").toUpperCase(),n=r.labels[n];return null==n&&(n=e),n=1==t?n.toUpperCase():n},setLabels:function(e){return angular.merge(r.labels,e)}}},r.setLabels=function(e){r.labels=angular.merge(r.labels,e)}})}()},function(e,t){!function(){"use strict";function PlaceholderController(a,l,r,e,i,s,t,o,n,c,d,u,f,p,E,g,h,m,v,T,P,S,_,C,D,A,I,N,O,L,R,w,U,M,b,F,y,k,V,x,B,j,G,$,H){var X=this;function initializeDynamicVariables(){X.defaultEsignatureMessage="",X.isLoading=!0,X.reverse=!1,X.selectedNewOption=E.ADD_NEW,X.isNewPlaceholderShown=!1,X.newPlaceholder={},X.selectedPlaceholder=null,X.placeholderSelectedForExpandedPreview=null,X.rightClickedPlaceholder=null,X.imagePreviewLoadingInterval=null,X.enlargedPreviewLoadingInterval=null,X.searchText="",X.productSearchText="",X.selectedLeftNavHeader=X.leftNavAllDocumentsHeader,X.eSignPlaceholderSelected=!1,d.draggingFromRightNav=!1,X.hasEditPermissions=X.permissionService.hasPermission(X.configValues.contextObjectType,m.UNI_EDIT_DETAILS),X.hasNamePermission=X.permissionService.hasPermission(X.configValues.contextObjectType,m.UNI_CREATE_PLACEHOLDER_NAME),X.showRelationshipLink=!1,X.showCollateralLink=!1,X.allPlaceholdersSelected=!1,X.placeholderFilterValue,X.enlargedPreviewLink="",X.picklistValueChanged=!1,X.hasBulkUpdate=X.configValues.systemPropsMap.get(T.BULK_UPDATE_ENABLED),X.enhancedPlaceholderViewerPermissionsEnabled=X.configValues.systemPropsMap.get(T.ENHANCED_PLACEHOLDER_VIEWER_PERMISSIONS_KEY),X.labels=b.getLabels()}function setIsEditVisible(e){X.isEditVisible=e}function setIsSaveVisible(e){X.isSaveVisible=e}function setIsCancelVisible(e){X.isCancelVisible=e}function getFieldSetMetadata(e,n){_.retrieveFieldSetMetadata(e,n).then(function(t){n.forEach(function(e){X.fieldSetMetadataMap[e]=k.adjustFieldSetMetadata(t.fieldSetMetadataMap[e])})})}function getPlaceholderContextType(){return X.isLoanDocMan?u.PLACEHOLDER_APEX_TYPE_TO_API_NAME.LoanDocument:X.isAccountDocMan?u.PLACEHOLDER_APEX_TYPE_TO_API_NAME.AccountDocument:u.PLACEHOLDER_APEX_TYPE_TO_API_NAME.UniversalDocument}function toggleIsPlaceholderDetailExpanded(){X.isPlaceholderDetailExpanded=!X.isPlaceholderDetailExpanded}function selectedPlaceholderCount(){var n=0,r=!1;return X.eSignPlaceholderSelected=!1,angular.forEach(I.placeholders,function(e,t){e.isSelected&&(n+=1,e.status&&e.status.toLowerCase()===u.STATUS_SIGNATURE_NEEDED.toLowerCase()||(r=!0))}),X.eSignPlaceholderSelected=!r&&0<n,n}function filterByCategories(e){null!=e&&X.selectCategory(e),I.uncheckAllPlaceholders(),jQuery("#accordion .collapse.in").collapse("hide"),X.isCategoriesOpen=!0,X.placeholderFilterValue=void 0,X.isFilterByCategories=!0,X.filterService.deactivateAllFilters()}function retrievePlaceholders(){I.retrievePlaceholders().then(function(){I.placeholders&&I.placeholders.length&&(angular.forEach(I.placeholders,function(e,t){X.permissionService.hasRequiredViewerAccess(e)||(e.file&&""!==e.file||(e.file={}),e.file.previewUnavailable=!0)}),updatePlaceholderCount(),t.detectIE()?X.placeHolderPaginationLimit=30:X.placeHolderPaginationLimit=X.totalPlaceholdersCount),X.isLoading=!1})}function setLegalEntities(){_.retrieveLegalEntities(window.DocManId).then(function(e){X.relationshipOptions=[{recordId:"",accountId:"",name:b.getLabels().NONE_OPTION}].concat(e)})}function setCategories(){$.fetchCategories().then(function(e){X.docTypeOptions=e})}function setArchivedFiles(){s.retrieveArchivedDocumentsWithAttachments(function(e){I.prepareForUrls(e).then(function(){d.archivedFiles=e,X.isLoaded=!0})})}function determineContextObjectType(){X.isLoanDocMan=!1,X.isAccountDocMan=!1,X.isUniversalDocMan=!1,X.contextObjectType===u.CONTEXT_OBJECT_TYPE_LOAN?(X.isLoanDocMan=!0,X.contextObjType="LLC_BI__Loan__c"):X.contextObjectType===u.CONTEXT_OBJECT_TYPE_ACCOUNT?(X.isAccountDocMan=!0,X.contextObjType="Account"):X.contextObjectType===u.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE?(X.isUniversalDocMan=!0,X.contextObjType="Universal",null!=M.selectedProductInProductPackage&&(M.selectedProductInProductPackage.objectType===u.CONTEXT_OBJECT_TYPE_LOAN?(X.isUniversalDocMan=!1,X.isLoanDocMan=!0):M.selectedProductInProductPackage.objectType===u.CONTEXT_OBJECT_TYPE_ACCOUNT&&(X.isUniversalDocMan=!1,X.isAccountDocMan=!0))):X.isUniversalDocMan=!0}function cancelViewerPermissionsUpdate(){X.showViewerPermissionsModal=!1}function processPermOptions(e,t){for(var n in e){var r={name:n,value:e[n]};(t.includes(n.toLowerCase())?X.partnerPortalPermissions:X.portalPermissionsList).push(r)}}function markPlaceholderAsTrash(){_.removeFileFromPlaceholders([X.placeholderToBeDeleted.recordId]).then(function(e){d.archivedFiles=e[0],I.unlinkRequirementFromPlaceholder([X.placeholderToBeDeleted.recordId]),I.convertPropertyNamesFromCamelCase(d.archivedFiles),_.archivePlaceholderFromFileStaging(X.placeholderToBeDeleted.recordId).then(function(){var e=I.placeholders.indexOf(X.placeholderToBeDeleted);I.placeholders.splice(e,1),X.placeholderToBeDeleted=null,X.showDeleteModal=!1,updatePlaceholderCount()}).catch(function(){X.placeholderToBeDeleted=null,X.showDeleteModal=!1})}).catch(function(){X.placeholderToBeDeleted=null,X.showDeleteModal=!1})}function configureDynamicColumn(){var e=X.contextObjectType;e===u.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&null!==M.selectedProductInProductPackage&&(e=M.selectedProductInProductPackage.objectType,d.$broadcast(u.CHANGED_PRODUCT_PACKAGE_PRODUCT,e)),_.getConfigurableColumns(e).then(function(e){X.configurableColumns=JSON.parse(e),X.columnHeaders=[{label:l.NAME,name:"name",fieldPath:"Name",columnStyle:"col-xs-6 col-sm-2 col-lg-3 docman-header-column",sortReverseDefault:!1}];var o=0;angular.forEach(X.configurableColumns,function(e,t){var n=-1<u.SORT_REVERSE_DEFAULT_TYPES.indexOf(e.typeApex),r=-1<u.CONVERT_TO_RELATIONSHIP_LABEL.indexOf(e.label.toLowerCase());e.type==u.TEXTAREA_TYPE&&(X.columnWidths[e.fieldPath]=u.DEFAULT_TEXTAREA_COLUMN_WIDTH),r&&(e.label=l.RELATIONSHIP),-1<u.CONVERT_TO_CATEGORY_LABEL.indexOf(e.label.toLowerCase())&&(e.label=l.CATEGORY);n={label:e.label,name:"configurableColumns["+o+"].sortValue",fieldPath:e.fieldPath,columnStyle:"hidden-xs col-sm-2 docman-header-column",sortReverseDefault:n};n.fieldPath===window.UniDocMan.namespacePrefix+"Legal_entity__r.LLC_BI__Account__c"&&(n.fieldPath=window.UniDocMan.namespacePrefix+"Legal_entity__r.LLC_BI__Account__r.Name"),X.columnHeaders.push(n),o++})}),X.showRelationshipLink=e!==u.CONTEXT_OBJECT_TYPE_ACCOUNT&&e!==u.CONTEXT_OBJECT_TYPE_COLLATERAL,X.showCollateralLink=e===u.CONTEXT_OBJECT_TYPE_LOAN,e===u.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&X.configValues.includeProductPackageDocMan===u.STRING_VALUE_TRUE&&angular.forEach(M.productPackageProducts,function(e,t){e.objectType===u.CONTEXT_OBJECT_TYPE_LOAN&&(X.showCollateralLink=!0)})}function sortOrder(e,t){X.columnSortHeader===e?X.reverse=!X.reverse:(X.reverse=t,X.secondarySortHeader=X.secondarySortHeader||X.columnSortHeader!==e?X.columnSortHeader:"name"),X.columnSortHeader=e}function renderPreview(e,t,n){var r=t===i.CONTENT_PREVIEW_LARGE,o=t===i.CONTENT_PREVIEW_THUMBNAIL;X.permissionService.hasRequiredViewerAccess(e)?o?(e.isDocumentExternal&&(e.file&&""!==e.file||(e.file={}),e.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_EXTERNAL,X.enlargedPreviewLink=""),X.imagePreviewLoadingInterval=setIntervalFunction(i.CONTENT_PREVIEW_THUMBNAIL,i.CONTENT_PREVIEW_URL+e.file.Id,100)):r&&!e.isDocumentExternal&&(X.selectedVersion||(X.selectedVersion=e.file),t=X.selectedVersion.enlargedPreviewBaseUrl+X.selectedVersion.Id,X.enlargedPreviewLoadingInterval=setIntervalFunction(i.CONTENT_PREVIEW_LARGE,t+=void 0!==n?"&page="+n:"",1e3)):o?X.selectedPlaceholder.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_FALLBACK:r&&(X.selectedVersion=X.selectedVersion||e.file,X.selectedVersion.enlargedPreviewLink=UniDocMan.IMAGE_EXPANDED_PREVIEW_NOT_AVAILABLE)}function setIntervalFunction(t,n,r){var o=0;return window.setInterval(function(){o++;var e=X.enlargedPreviewLink;a.$apply(function(){t===i.CONTENT_PREVIEW_THUMBNAIL?X.selectedPlaceholder.file.previewLink="":t===i.CONTENT_PREVIEW_LARGE&&(X.enlargedPreviewLink="")}),a.$apply(function(){r<o?t===i.CONTENT_PREVIEW_THUMBNAIL?(X.selectedPlaceholder.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_FALLBACK,X.enlargedPreviewLink=UniDocMan.IMAGE_EXPANDED_PREVIEW_NOT_AVAILABLE,X.selectedPlaceholder.file.previewUnavailable=!0):t===i.CONTENT_PREVIEW_LARGE&&(X.enlargedPreviewLink=UniDocMan.IMAGE_EXPANDED_PREVIEW_NOT_AVAILABLE):t===i.CONTENT_PREVIEW_THUMBNAIL?(X.selectedPlaceholder.file.previewLink=n,""!==e&&(X.enlargedPreviewLink=e)):t===i.CONTENT_PREVIEW_LARGE&&(X.enlargedPreviewLink=n)})},100)}function renderModal(t){_.getESignatureDefaultMessage().then(function(e){!function setSelected(e){for(var t=[],n=0;n<e.length;n++)e[n].isSelected=!0,t.push(e[n].recordId);for(n=0;n<I.placeholders.length;n++)-1===t.indexOf(I.placeholders[n].recordId)&&(I.placeholders[n].isSelected=!1)}(t),X.selectedPlaceholders=t,X.defaultEsignatureMessage=e,X.showEsignatureMessageModal=!0,X.workingModal=!1})}function ssfbSave(t){j.publish(LifeCycle.Topics.GlobalActionButtonHandler.FIRE_CONTINUE_WITHOUT_SAVE),X.toggleButtonDisable();var n=X.ssfbDetermineChangeOfStatus(t);y.saveFormBuilder().then(function(e){"success"===e?function ssfbSavePlaceholderSuccess(t,n){setIsCancelVisible(!1),X.isSaveVisible=!1,X.isEditVisible=!0,t.isEditing=!1,X.toggleButtonDisable(),t.file?t.file.previewLoaded=!0:t.file={previewLoaded:!0,previewLink:""};X.loadPlaceholderDetails(t,500,!0),updateLegalEntityFieldDisplayValue(),n&&(V.ssfbBuildChatterCommentForChangedFields(t,y.formBuilder.fields,function(e){(0<n.length||0<e.length)&&(t.newComment=n+"  "+e,X.addChatterComment(t)),X.retrieveChatterComments(t)}),s.updatePlaceholderStatus(t.recordId,t.status));I.updateRequirementRemote([t.recordId]),X.selectedPlaceholder.screenSectionFields=JSON.parse(JSON.stringify(y.formBuilder.fields))}(t,n):"failure"===e&&X.toggleButtonDisable()})}function updateLegalEntityFieldDisplayValue(){var e=x.getFields([P.LEGAL_ENTITY.LOAN,P.LEGAL_ENTITY.UNIVERSAL],y.formBuilder.fields,!1);angular.forEach(e,function(e){for(var t in X.relationshipOptions){t=X.relationshipOptions[t];if(t.recordId===e.value){e.displayValue=t.name;break}}})}function addCustomField(e){for(var t=0;t<X.customFields.length;t++)e.fieldName&&X.customFields[t].fieldName?X.customFields[t].fieldName.toLowerCase()===e.fieldName.toLowerCase()&&(X.customFields[t]=e):e.referenceFieldPath&&X.customFields[t].referenceFieldPath&&X.customFields[t].referenceFieldPath.toLowerCase()===e.referenceFieldPath.toLowerCase()&&(X.customFields[t]=e);X.customFields=X.customFields.concat([e])}function savePlaceholderSuccess(e,t,n){I.copyPlaceholderProperties(e[0],t),t.isEditing=!1,L.clear(),X.toggleButtonDisable(),t.file?t.file.previewLoaded=!0:t.file={previewLoaded:!0,previewLink:""},X.loadPlaceholderDetails(t,500,!0),n&&V.buildChatterCommentForChangedFields(t,X.selectedPlaceholder.beforeFields,function(e){(0<n.length||0<e.length)&&(t.newComment=n+"  "+e,X.addChatterComment(t)),X.retrieveChatterComments(t)}),I.updateRequirementRemote([t.recordId]),X.selectedPlaceholder.beforeFields=t.fields}function savePlaceholderFailure(e){L.setMessage({type:L.messageTypes.error,text:e,context:"modal"}),X.toggleButtonDisable()}function resetToast(){X.toast="",X.toastSubHeading="",X.downloadSubHeading1="",X.downloadSubHeading2="",X.downloadLinkValue="",X.downloadVersionId=""}function hideNewDialog(){X.isNewPlaceholderShown=!1,X.newPlaceholder={},x.clearScreenSections(),function restoreCachedValues(){x.mapValues(y.screenSections,X.cachedSections),x.mapValues(y.formBuilder.fields,X.cachedFormBuilder)}(),y.setIsEditing(!1)}function updatePlaceholderCount(){X.totalPlaceholdersCount=I.placeholders.length,X.visiblePlaceholderCount=G("placeholderViewerRolesFilter")(I.placeholders,X.enhancedPlaceholderViewerPermissionsEnabled).length,X.placeholderPagination()}function renderPreviewPage(e){clearInterval(X.enlargedPreviewLoadingInterval),X.isLoadingLargeImage=!0,renderPreview(e,i.CONTENT_PREVIEW_LARGE,X.selectedVersion.currentPreviewPage-1)}function getOffsetDatetime(e){var t=new Date(e);return e&&!isNaN(t.getTime())&&window.LifeCycle.Internationalize?window.LifeCycle.Internationalize.timeZoneUtil&&window.LifeCycle.Internationalize.timeZoneUtil.applyAggregateOffset?new Date(window.LifeCycle.Internationalize.timeZoneUtil.applyAggregateOffset("add",t.getTime())):t:null}function getSelectedPlaceholders(){for(var e=[],t=0;t<I.placeholders.length;t++)I.placeholders[t].isSelected&&e.push(I.placeholders[t]);return e}function hasEditAccess(e,t){return X.permissionService.hasRequiredViewerAccess(e)&&X.permissionService.hasEditAfterApprovalPermission(m.UNI_EDIT_DETAILS,e.status,t)}function showErrorToast(e){showToast(e,v.ERROR,f.THEME_ERROR,"Error")}function showSuccessToast(e){showToast(e,v.SUCCESS,f.THEME_SUCCESS,"Success")}function showToast(e,t,n,r){X.toast=e,X.toastType=t,X.toastIcon=n,X.toastLabel=r}function getSelectedPlaceholders(){return I.placeholders.filter(e=>e.isSelected)}X.connection,X.columnSortHeader="",X.secondarySortHeader="",X.leftNavAllDocumentsHeader=e.ALL_DOCUMENTS,X.selectedLeftNavHeader=X.leftNavAllDocumentsHeader,X.relationshipOptions=[],X.docTypeOptions=[],X.docTypeLabel=g.LABEL,X.showDeleteModal=!1,X.showDeleteMultipleModal=!1,X.workingModal=!1,X.showVersionsModal=!1,X.showEsignatureCollectionDetailModal=!1,X.showEsignatureCancelDetails=!1,X.isFilterByCategories=!1,X.showPortalOptionsModal=!1,X.showViewerPermissionsModal=!1,X.viewRequestDocumentsModal=!1,X.requestDocumentsEditMode=!1,X.placeholderToBeDeleted=null,X.placeholdersToBeDeleted=[],X.placeholdersInCollection=[],X.displayPreviewBackground=!1,X.showContextMenu=!1,X.hasEditPermissions=!1,X.hasNamePermission=!1,X.showAddNewDropdown=!1,X.performingAjax=!1,function initializeToast(){X.toastStack=[{toastIcon:f.THEME_SUCCESS}],X.toastType=v.MESSAGE,X.toastIcon=f.THEME_WARNING,X.toastLabel="Message",resetToast()}(),X.showEsignatureMessageModal=!1,X.statusLists={},X.statusTheme={},X.contextObjectType="",X.placeholderNames=[],X.selectedCategory="",X.isLoanDocMan=!1,X.isAccountDocMan=!1,X.isUniversalDocMan=!1,X.contextObjType="",X.showPortalRejectionModal=!1,X.versioningEnabled=!0,X.rejectionReasons=[],X.configValues=R.get(),X.configurableColumns=[],X.buttonDisabled=!1,X.showCancelPortalModal=!1,X.placeholdersToBeCancelled=[],X.isTranslated=!1,X.selectedPlaceholder,X.selectedVersion,X.isCategoriesOpen=!0,X.documentManagerFileSizeLimit="",X.bulkUpdateRecords=[],X.selectedCategories=[],X.esignUploadInProgress=!1,X.selectedPlaceholders=[],X.eSignatureService=N,X.defaultDownloadService=C,X.permissionService=h,X.placeholderService=I,X.commonService=o,X.productPackageService=M,X.uploadServiceData=n,X.filterService=B,X.config=R,X.CONSTANTS=u,X.navigator=F,X.fieldRestrictions=[],X.addNewPlaceholder=function addNewPlaceholder(){X.toggleButtonDisable(),X.newPlaceholder=x.buildPlaceholderFromSection(),function validateNewPlaceholderAndSave(){var e=y.screenSections[Object.keys(y.screenSections)[0]].guid;y.isValidForm(e)?(X.newPlaceholder.validationErr=!1,s.addNewPlaceholder(X.newPlaceholder,function(e){a.$apply(function(){hideNewDialog(),I.setStatuses(e),I.placeholders.push(e),updatePlaceholderCount(),X.toggleButtonDisable()})},function(e,t){X.toggleButtonDisable(),X.newPlaceholder.err=!0})):(X.newPlaceholder.validationErr=!0,X.toggleButtonDisable())}()},X.addChatterComment=function addChatterComment(e,t=!0){X.performingAjax=!0,e.newComment&&s.addChatterComment(e.recordId,e.newComment,function(){e.newComment="",X.performingAjax=!1,t&&X.retrieveChatterComments(e)})},X.addFile=function addFile(){jQuery("#rightClickAddFile-"+X.rightClickedPlaceholder.recordId+":hidden").trigger("click")},X.buildImageURL=function buildImageURL(e){{var t;e.file&&(t=e,(e=[])[t.file.ParentId]=t)}d.currentTime=(new Date).getTime(),I.buildImageUrls(e).then(function(){X.selectedPlaceholder&&X.loadPlaceholderDetails(X.selectedPlaceholder,500)})},X.canPrepareForESignature=function canPrepareForESignature(){return UniDocMan.ESignaturePluginActive&&X.permissionService.hasPrepareForESignature()},X.cancelDelete=function cancelDelete(){X.showDeleteModal=!1,X.showDeleteMultipleModal=!1,X.placeholderToBeDeleted=null,X.placeholdersToBeDeleted=[]},X.cancelEditDetails=function cancelEditDetails(){X.selectedPlaceholder&&(X.selectedPlaceholder.isEditing=!1,X.selectedPlaceholder.fields=jQuery.extend(!0,{},X.selectedPlaceholder.beforeFields),X.selectedPlaceholder.validationErr=!1,X.selectedPlaceholder.err=!1,L.clear(),j.publish(LifeCycle.Topics.GlobalActionButtonHandler.FIRE_CONTINUE_WITHOUT_SAVE),y.setIsEditing(!1).then(function(){setIsCancelVisible(!1),setIsSaveVisible(!1),setIsEditVisible(!0),y.revertFields(Object.keys(y.screenSections)[0])}))},X.setMultiPicklistValue=function setMultiPicklistValue(e,t){var n,r=e.getAttribute("data-field"),o=e.getAttribute("data-id"),e=t.fields[r];if(r){var t=jQuery("select[data-id="+o+"]"),r=jQuery("img.picklistArrowRight[data-id="+o+"]"),o=t[0],a=t[1];if(e&&o){for(var i=e.split(";"),l=0,s=a.options.length;l<s;l++)n=a.options[l],-1!=i.indexOf(n.innerHTML)&&(n.selected="selected");r.click()}}},X.updateMultiPicklistValue=function updateMultiPicklistValue(e,t){for(var n,r=[],o=e&&e.options,a=e.getAttribute("data-field"),e=e.getAttribute("data-id"),i=0,l=o.length;i<l;i++)(n=o[i]).selected&&r.push(n.value);e=="update-picklist-"+a?t.fields[a]=r.join(";"):e=="add-new-picklist-"+a&&(t[a]=r.join(";"))},X.cancelPortalOptionsUpdate=function cancelPortalOptionsUpdate(){X.showPortalOptionsModal=!1},X.cancelViewerPermissionsUpdate=cancelViewerPermissionsUpdate,X.cancelPortalRejectionModal=function cancelPortalRejectionModal(){X.showPortalRejectionModal=!1,X.selectedPlaceholder.portalRejectionComment=X.originalRejectionComment,X.selectedPlaceholder.portalRejectionReason=X.originalRejectionReason},X.cancelOverwrite=function cancelOverwrite(){d.$broadcast(u.OVERWRITE_CONFIRM,!1),X.showOverwriteModal=!1,jQuery(".docman-placeholder-row").removeClass("fileHover")},X.closeExpandedPreview=function closeExpandedPreview(){clearInterval(X.enlargedPreviewLoadingInterval),X.displayPreviewBackground=!1,X.isLoadingNewPage=!1,X.isProcessing=!1,X.enlargedPreviewLink=""},X.configureDynamicColumn=configureDynamicColumn,X.closeModal=function closeModal(){w.url(p.DEFAULT_ROUTE)},X.resetToast=resetToast,X.changeLeftNavFilter=function changeLeftNavFilter(e){X.selectedLeftNavHeader=e},X.confirmDelete=function confirmDelete(){markPlaceholderAsTrash(X.placeholderToBeDeleted)},X.confirmDeleteMultiple=function confirmDeleteMultiple(){X.workingModal=!0;var n=[];angular.forEach(X.placeholdersToBeDeleted,function(e,t){n.push(e.recordId)}),X.showDeleteMultipleModal=!1,I.unlinkRequirementFromPlaceholder(n),_.removeFileFromPlaceholders(n).then(function(){_.archivePlaceholdersFromFileStaging(n).then(function(){angular.forEach(X.placeholdersToBeDeleted,function(e,t){e=I.placeholders.indexOf(e);I.placeholders.splice(e,1)}),X.updatePlaceholderCount(),X.setArchivedFiles(),X.workingModal=!1,X.placeholdersToBeDeleted=[]}).catch(function(){X.workingModal=!1,X.placeholdersToBeDeleted=[]})}).catch(function(){X.workingModal=!1,X.placeholdersToBeDeleted=[]})},X.confirmOverwrite=function confirmOverwrite(){d.$broadcast(u.OVERWRITE_CONFIRM,!0),X.showOverwriteModal=!1},X.copyFileLink=function copyFileLink(e){var t="https://"+w.$$host;e.file.RecordType===i.ATTACHMENT?t+=i.ATTACHMENT_DOWNLOAD_URL+e.file.Id:t+=i.CONTENT_DOWNLOAD_URL+e.file.Id;o.copyToClipboard(t)},X.deletePlaceholder=function deletePlaceholder(e){X.placeholderToBeDeleted=e,X.showDeleteModal=!0},X.deletePlaceholders=function deletePlaceholders(){angular.forEach(I.placeholders,function(e,t){e.isSelected&&X.placeholdersToBeDeleted.push(e)}),X.placeholdersToBeDeleted.length&&(X.showDeleteMultipleModal=!0)},X.downloadFile=function downloadFile(e){if(void 0!==D.before&&typeof D.before===u.FUNCTION&&void 0!==D.after&&typeof D.after===u.FUNCTION&&void 0!==D.execute&&typeof D.execute===u.FUNCTION&&!0===D.before(e.recordId,e.isDocumentExternal,e.documentStorageType))return void D.execute().then(function(e){D.after(e)},function(e){D.after(e)});C.executeDownload(e)},X.retrieveAndProcessData=function retrieveAndProcessData(){configureDynamicColumn(),retrievePlaceholders(),determineContextObjectType(),setLegalEntities(),setCategories(),setArchivedFiles(),A.retrieveFileStagingPlaceholders().then(function(){}),sortOrder("name",!1),getFieldSetMetadata(getPlaceholderContextType(),[window.UniDocMan.namespacePrefix+"DocMan_Fields"]),x.updateScreenSections().then(function(e){X.screenSections=e})},X.downloadVersion=function downloadVersion(e,t,n){{var r,o;e.isExternalReference?window.open(e.externalDownloadUrl):t?(1==R.get().systemPropsMap.get(T.DOCUMENT_DOWNLOAD_NAME_KEY)?r=e.Title:(r=X.selectedPlaceholder.name,e!==X.selectedPlaceholder.versions[0]&&(r+=u.DASH+e.versionNumber)),o=i.CONTENT_DOWNLOAD_URL,t=!0,e.RecordType===i.ATTACHMENT&&(o=i.ATTACHMENT_DOWNLOAD_URL,t=!1),o=C.getDownloadLink(o,e.Id,n),C.updateFileTitleAndDownload(e.Id,r,t,o,e.Title)):C.downloadVersion(e.Id,n)}},X.doubleClickPlaceholderRow=function doubleClickPlaceholderRow(e){jQuery(u.HASH+e.recordId).collapse("toggle"),toggleIsPlaceholderDetailExpanded()},X.duplicatePlaceholder=function duplicatePlaceholder(e){{if(null==e)return{errorMessage:b.getLabels().PLACEHOLDER_OBJECT_NULL};s.duplicatePlaceholder(e.recordId,function(e){a.$apply(function(){e.file="",I.setStatuses(e),I.placeholders.push(e),updatePlaceholderCount()})})}},X.contextMenuEditDetails=function contextMenuEditDetails(e){e===X.selectedPlaceholder&&X.selectedPlaceholder.isOpen?X.showEditDetails(e):(e.rightClickEditDetails=!0,jQuery(u.HASH+e.recordId).collapse("show"))},X.filterByCategories=filterByCategories,X.formatContentSize=function formatContentSize(e){return null==e||isNaN(e)||""===e?"":1<=e/1024e6?"("+Math.round(10*e/1024e6)/10+" GB)":1<=e/1024e3?"("+Math.round(10*e/1024e3)/10+" MB)":1<=e/1024?"("+Math.round(e/1024)+" KB)":e/1024<1?"("+e+" Bytes)":""},X.hideNewDialog=hideNewDialog,X.initializeDynamicVariables=initializeDynamicVariables,X.downloadMultipleFiles=function downloadMultipleFiles(){C.downloadMultipleFiles(I.placeholders)},X.initializePortalRejectionModal=function initializePortalRejectionModal(t){X.showPortalRejectionModal=!0,I.loadRejectionReasonPicklistValues(t.apexType).then(function(e){X.rejectionReasons=e,X.selectedPlaceholder=t,X.originalRejectionReason=X.selectedPlaceholder.portalRejectionReason,X.originalRejectionComment=X.selectedPlaceholder.portalRejectionComment})},X.isCategoryField=function isCategoryField(e){return e===g.PATH||e===g.PATH2},X.isDocTypeField=function isDocTypeField(e){return e.toLowerCase()===(window.UniDocMan.namespacePrefix+u.DOC_TYPE_FIELD).toLowerCase()||e.toLowerCase()===(u.DEFAULT_NAMESPACE+u.DOC_TYPE_FIELD).toLowerCase()},X.isLegalEntityField=function isLegalEntityField(e){return e===window.UniDocMan.namespacePrefix+u.ENTITY_LOOKUP_FIELD},X.isPlaceholderDetailExpanded=!1,X.toggleIsPlaceholderDetailExpanded=toggleIsPlaceholderDetailExpanded,X.isRelationshipField=function isRelationshipField(e){return e===window.UniDocMan.namespacePrefix+u.RELATIONSHIP_LOOKUP_FIELD},X.isSortedByStatus=function isSortedByStatus(){return angular.isFunction(X.columnSortHeader)},X.loadPlaceholderDetails=function loadPlaceholderDetails(e,t,n){clearInterval(X.imagePreviewLoadingInterval),!n&&X.selectedPlaceholder&&X.selectedPlaceholder.beforeFields&&delete X.selectedPlaceholder.beforeFields;X.selectedPlaceholder!==e&&(x.clearScreenSections(),X.selectedPlaceholder=e);n&&I.convertPropertyNamesFromCamelCase([X.selectedPlaceholder]);X.retrieveChatterComments(e),I.placeholderHasFileOrExternal(X.selectedPlaceholder)?void 0!==X.selectedPlaceholder.file.RecordType&&X.selectedPlaceholder.file.RecordType===r.FILE?void 0===X.selectedPlaceholder.file.ParentId||X.selectedPlaceholder.file.previewLoaded||(!function isPreviewSupported(e){return-1!==["PDF","WORD_X","WORD","EXCEL_X","EXCEL","POWER_POINT_X","POWER_POINT","PNG","JPEG","JPG","BMP","TEXT"].indexOf(e)}(e.file.FileType)?c(function(){a.$apply(function(){X.selectedPlaceholder.file?(X.selectedPlaceholder.file.previewLoaded=!0,X.selectedPlaceholder.file.previewUnavailable=!0):X.selectedPlaceholder.file={previewLoaded:!0,previewLink:""},X.selectedPlaceholder.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_TYPE})},t):renderPreview(X.selectedPlaceholder,i.CONTENT_PREVIEW_THUMBNAIL)):X.selectedPlaceholder.isDocumentExternal&&X.selectedPlaceholder.documentStorageType?renderPreview(X.selectedPlaceholder,i.CONTENT_PREVIEW_THUMBNAIL):c(function(){a.$apply(function(){X.selectedPlaceholder.file?(X.selectedPlaceholder.file.previewLoaded=!0,X.selectedPlaceholder.file.previewUnavailable=!0):X.selectedPlaceholder.file={previewLoaded:!0},X.selectedPlaceholder.file.previewLink=UniDocMan.IMAGE_PREVIEW_NOT_AVAILABLE_FALLBACK})},t):c(function(){a.$apply(function(){X.selectedPlaceholder.file?(X.selectedPlaceholder.file.previewLoaded=!0,X.selectedPlaceholder.file.previewUnavailable=!0):X.selectedPlaceholder.file={previewLoaded:!0},X.selectedPlaceholder.file.previewLink=""})},t);s.retrievePlaceholderWithFields(X.selectedPlaceholder.recordId,function(t){s.retrievePlaceholderFieldSet(X.selectedPlaceholder.recordId,function(e){a.$apply(function(){X.selectedPlaceholder.fieldSetSchema=JSON.parse(e),X.selectedPlaceholder.fields=t,X.selectedPlaceholder.beforeFields=jQuery.extend(!0,{},X.selectedPlaceholder.fields),X.selectedPlaceholder.rightClickEditDetails&&(X.selectedPlaceholder.rightClickEditDetails=!1,X.showEditDetails(X.selectedPlaceholder)),function updatePlaceholderConfigurableColumns(){for(var e,t,n=0;n<I.placeholders.length;n++)if(I.placeholders[n].isOpen){var r=X.selectedPlaceholder.fields;X.selectedPlaceholder.name=r.Name;for(var o=0;o<I.placeholders[n].configurableColumns.length;o++)1<(e=I.placeholders[n].configurableColumns[o].fieldPath).split(".").length?(t=e.split(".")[0]==window.UniDocMan.namespacePrefix+"Legal_entity__r"?function getLegalEntityRelationshipName(e){for(var t=e[window.UniDocMan.namespacePrefix+"Legal_entity__c"],n=0;n<X.relationshipOptions.length;n++)if(X.relationshipOptions[n].recordId==t)return X.relationshipOptions[n].name}(r):function getRelationshipFieldValue(e,t){return e.split(".").reduce(function(e,t){return e?e[t]:null},t||self)}(e,r),I.placeholders[n].configurableColumns[o].displayValue=t,I.placeholders[n].configurableColumns[o].value=t):(I.placeholders[n].configurableColumns[o].displayValue=r[e],I.placeholders[n].configurableColumns[o].value=r[e]);break}}()})})})},X.markPlaceholderAsTrash=markPlaceholderAsTrash,X.passedExceptionDate=function passedExceptionDate(e,t){if(-1!==u.EXCEPTION_DATE_FIELDS.indexOf(e))if(t.fields&&t.fields[e])if(null!=t.fields[e])if(new Date(t.fields[e])<=new Date)return!0;return!1},X.placeholderFilter=function placeholderFilter(e){I.uncheckAllPlaceholders(),jQuery("#accordion .collapse.in").collapse("hide"),X.placeholderFilterValue=e,X.isFilterByCategories=!1,X.selectedCategories=[],X.filterService.deactivateAllFilters()},X.productPackageProductChange=function productPackageProductChange(e){M.selectedProductInProductPackage=e,window.DocManId=M.selectedProductInProductPackage.recordId,initializeDynamicVariables(),configureDynamicColumn(),retrievePlaceholders(),determineContextObjectType(),I.populateStatusObjects(),setLegalEntities(),setCategories(),setArchivedFiles(),x.updateScreenSections().then(function(e){X.screenSections=e}),A.retrieveFileStagingPlaceholders().then(function(){})},X.renderPreview=renderPreview,X.retrieveChatterComments=function retrieveChatterComments(n){null!=n&&s.retrieveChatterComments(n.recordId,function(t){a.$apply(function(){if(n.comments=t,n.comments&&0<n.comments.length)for(var e=0;e<n.comments.length;e++)n.comments[e].body=String(n.comments[e].body).replace(/<[^>\<]+>/gm,"")})})},X.retrievePlaceholderNames=function retrievePlaceholderNames(e){X.selectedCategory=e,X.performingAjax=!0,_.retrievePlaceholderNames(X.selectedCategory).then(function(e){X.selectedPlaceholder&&X.selectedPlaceholder.fieldSetSchema&&o.formatDateFieldsForInput(X.selectedPlaceholder,X.selectedPlaceholder.fieldSetSchema),e&&0<e.length&&(X.placeholderNames=e),X.performingAjax=!1})},X.retrievePlaceholders=retrievePlaceholders,X.savePlaceholderPortalFields=function savePlaceholderPortalFields(t){X.toggleButtonDisable();var e,n={},r=[];for(e in u.PORTAL_FIELDS){var o=u.PORTAL_FIELDS[e];null!=t.fields[o]&&(n[o]=t.fields[o])}if(t.fields){for(var o in n){var a=n[o];null==a||""===a?(r.push(o),delete n[o],-1!==o.indexOf("Portal_Doc_Name__c")&&(t.portalDocName=t.name)):-1!==o.indexOf("Portal_Doc_Name__c")&&(t.portalDocName=a)}_.savePlaceholderPortalData(t.recordId,n,r).then(function(e){X.showPortalOptionsModal=!1,savePlaceholderSuccess(e,t)},function(e){savePlaceholderFailure(e)})}},X.savePlaceholderWithFields=function savePlaceholderWithFields(t){X.toggleButtonDisable();var n=function determineChangeOfStatus(e){var t="",n=new Date,r=null,o="";o=-1<e.apexType.indexOf("LoanDocument")||-1<e.apexType.indexOf("AccountDocument")?(r=new Date(parseInt(e.fields.LLC_BI__exceptionDate__c)),"LLC_BI__reviewStatus__c"):(r=new Date(parseInt(e.fields.LLC_BI__Exception_Date__c)),"LLC_BI__Review_Status__c");e.file||(e.file={previewLoaded:!1,previewLink:""});r<=n&&X.selectedPlaceholder.status!=u.STATUS_EXCEPTION?(e.fields[o]=u.STATUS_EXCEPTION,t+=" "+b.getLabels().STATUS_CHANGED_FROM+" "+b.getLabel(X.selectedPlaceholder.status,1)+" "+b.getLabels().TO_LABEL+" "+b.getLabel(u.STATUS_EXCEPTION,1)+u.PERIOD,X.selectedPlaceholder.status=u.STATUS_EXCEPTION,X.selectedPlaceholder.statusTranslation=b.getLabel(u.STATUS_EXCEPTION)):n<r&&X.selectedPlaceholder.status==u.STATUS_EXCEPTION&&(r=u.STATUS_OPEN,(e.file.Title||e.file.Id)&&(r=u.STATUS_IN_FILE),e.fields[o]=r,t+=" "+b.getLabels().STATUS_CHANGED_FROM+" "+b.getLabel(u.STATUS_EXCEPTION,1)+" "+b.getLabels().TO_LABEL+" "+b.getLabel(r,1)+u.PERIOD,X.selectedPlaceholder.status=r,X.selectedPlaceholder.statusTranslation=b.getLabel(r));return t}(t),r=function chooseFieldsToBeSaved(e){var t,n={};for(t in e.fields)(null==e.beforeFields[t]||e.beforeFields[t]!==e.fields[t]||u.REQUIRED_FIELDS_TO_BE_SAVED.some(function(e){return t===e}))&&(n[t]=e.fields[t]);return n}(t),o=[];if(t.fields){var e,a=!1;for(e in t.fieldSetSchema){var i=t.fieldSetSchema[e],l=t.fields.hasOwnProperty(i.fieldPath)?t.fields[i.fieldPath]:"";if(!0===i.required&&(null==l||""===l)){a=!0,X.selectedPlaceholder.validationErr=!0,X.toggleButtonDisable();break}"DATE"===i.typeApex&&r.hasOwnProperty(i.fieldPath)&&(null==t.fields[i.fieldPath]||""===t.fields[i.fieldPath]?r[i.fieldPath]=null:r[i.fieldPath]=parseInt(t.fields[i.fieldPath])),"DATETIME"===i.typeApex&&r.hasOwnProperty(i.fieldPath)&&(null==t.fields[i.fieldPath]?r[i.fieldPath]=null:r[i.fieldPath]=parseInt(t.fields[i.fieldPath]))}a||(angular.forEach(r,function(e,t){null!==e&&""!==e||(o.push(t),delete r[t])}),j.publish(LifeCycle.Topics.GlobalActionButtonHandler.SAVE),_.savePlaceholderData(t.recordId,r,o).then(function(e){X.selectedPlaceholder.validationErr=!1,savePlaceholderSuccess(e,t,n)},function(e){savePlaceholderFailure(e)}))}},X.savePortalRejectionReasons=function savePortalRejectionReasons(e){X.performingAjax=!0;var t=u.REJECTION_REASON_FIELD,n=u.REJECTION_COMMENT_FIELD,r={};r[t]=e.portalRejectionReason,r[n]=e.portalRejectionComment,_.savePortalRejectionReasons(e.recordId,r).then(function(){X.performingAjax=!1,X.showPortalRejectionModal=!1,d.$broadcast(u.SAVED_PORTAL_REJECTION_REASON,e,u.STATUS_EXCEPTION)})},X.searchTextCollapse=function searchTextCollapse(){2<X.searchText.length&&jQuery("#accordion .collapse.in").collapse("hide")},X.selectCategory=function selectCategory(e){{var t;X.selectedCategories.includes(e)?(t=X.selectedCategories.indexOf(e),X.selectedCategories.splice(t,1)):X.selectedCategories.push(e)}0===X.selectedCategories.length&&filterByCategories()},X.confirmCancelAllESignatureCollections=function confirmCancelAllESignatureCollections(){N.confirmCancelAllESignatureCollections(a)},X.cancelESignatureCollection=function cancelESignatureCollection(){N.cancelESignatureCollection(a,X.placeholdersInCollection)},X.placeholderPagination=function placeholderPagination(){X.placeHolderPaginationLimit+10<X.totalPlaceholdersCount?X.placeHolderPaginationLimit+=10:X.placeHolderPaginationLimit=X.totalPlaceholdersCount},X.retrieveIsTranslated=function retrieveIsTranslated(){X.performingAjax=!0,I.retrieveIsTranslated().then(function(){null!==I.isTranslated&&(X.isTranslated=I.isTranslated),X.performingAjax=!1})},X.selectedPlaceholderCount=selectedPlaceholderCount,X.sendESignatures=function sendESignatures(){return!0===X.eSignPlaceholderSelected&&(N.sendESignatureDocuments(X.selectedPlaceholders,X.defaultEsignatureMessage).then(function(e){e?(showSuccessToast(f.E_SIGNATURE_SENT_SUCCESS_MSG),angular.forEach(X.selectedPlaceholders,function(e,t){e.isSelected&&e.status.toLowerCase()===u.STATUS_SIGNATURE_NEEDED.toLowerCase()&&o.performStatusUpdate(a,e,u.STATUS_SIGNATURE_PENDING)})):showErrorToast(f.ERROR_MSG),X.showEsignatureMessageModal=!1}),!0)},X.setShowContextMenu=function setShowContextMenu(e){X.showContextMenu=e},X.showEditDetails=function showEditDetails(e){X.selectedPlaceholder.screenSectionFields=JSON.parse(JSON.stringify(y.formBuilder.fields)),X.selectedPlaceholder.isEditing=!0,X.retrievePlaceholderNames(x.getPlaceholderCategory(e)),X.retrieveIsTranslated(),y.setIsEditing(!0).then(function(){setIsEditVisible(!1),setIsSaveVisible(!0),setIsCancelVisible(!0),j.publish(LifeCycle.Topics.GlobalActionButtonHandler.FIRE_SAVE_WITH_CONTINUE)})},X.showEsignatureMessage=function showEsignatureMessage(){{var t;!0===X.eSignPlaceholderSelected&&(X.workingModal=!0,!function placeholdersContainCollectionId(e){for(var t=0;t<e.length;t++)if(e[t].documentCollectionId)return!0;return!1}(t=getSelectedPlaceholders())?renderModal(t):(t=function findAllCollectionIdPlaceholders(e){for(var t=[],n=0;n<I.placeholders.length;n++)I.placeholders[n].documentCollectionId&&e[0].documentCollectionId&&I.placeholders[n].documentCollectionId===e[0].documentCollectionId&&t.push(I.placeholders[n]);return t}(t),O.validateDocumentsForSend(t)?function isCollectionActive(e){var t=U.defer();return _.retrieveActiveDocumentCollections([e]).then(function(e){e&&!e.length?(showErrorToast(f.E_SIGNATURE_INACTIVE_COLLECTION_ID),t.resolve(!1)):t.resolve(!0)}),t.promise}(t[0].documentCollectionId).then(function(e){e?renderModal(t):X.workingModal=!1}):X.workingModal=!1))}},X.showESignatureCollectionDetails=function showESignatureCollectionDetails(n,e){X.placeholdersInCollection=[],X.showEsignatureCancelDetails=e,n.documentCollectionId&&angular.forEach(I.placeholders,function(e,t){e.documentCollectionId&&e.documentCollectionId==n.documentCollectionId&&X.placeholdersInCollection.push(e)});X.showEsignatureCollectionDetailModal=!0},X.showExpandedPreview=function showExpandedPreview(n,t,e){{var r;X.placeholderSelectedForExpandedPreview=n,X.selectedVersion=n.file,X.returnFocusElementId=e,t&&n.versions&&(r=n.versions.filter(function(e){return e.Id===t}))&&0<r.length&&(X.selectedVersion=r[0])}n.isExternalReference?window.open(n.externalPreviewUrl):(X.connection=X.connection||new jsforce.Connection({accessToken:s.sessionId}),X.expandedFileTitle=X.selectedVersion.fileName,X.displayPreviewBackground=!0,X.isLoadingLargeImage=!0,X.selectedVersion.currentPreviewPage=0,-1<X.selectedVersion.previewUrlCount&&void 0!==X.selectedVersion.previewFormat&&!X.selectedVersion.hasConnectApiError?renderAvailablePreviews(n,X.selectedVersion.previewUrlCount,X.selectedVersion.previewFormat):I.getContentDocumentByVersion(X.selectedVersion.Id,X.selectedVersion.contentDocumentId).then(function(e){var t=X.configValues.siteBaseSecureUrl,e=X.isSite?t+"/services/data/v51.0/connect/files/"+e.Id+"/previews":"/connect/files/"+e.Id+"/previews";return X.connection.chatter.resource(e)}).then(function(e){e=function selectAvailablePreview(e){var t,n={},r={};return e.forEach(function(e){"Available"===e.status?n[e.format]=e:"InProgress"===e.status||"NotScheduled"===e.status?r[e.format]=e:"NotAvailable"===e.status&&(t=e)}),n.hasOwnProperty("Jpg")?n.Jpg:n.hasOwnProperty("Svg")?n.Svg:r.hasOwnProperty("Jpg")?r.Jpg:r.hasOwnProperty("Svg")?r.Svg:n.hasOwnProperty("ThumbnailBig")?n.ThumbnailBig:t}(e.previews);e&&"Available"===e.status?(X.selectedVersion.hasConnectApiError=!1,renderAvailablePreviews(n,e.previewUrlCount,e.format),X.isProcessing=!1,I.setPreviewConfiguration(X.selectedVersion.Id,e.previewUrlCount,e.format)):renderWithoutPreviews(e?e.status:null)},function(e){X.isSite&&window.fetch&&!X.selectedVersion.hasFallbackPreviews?function getFallbackPreviews(){X.selectedVersion.hasConnectApiError=!0,X.getPreviews("Jpg").then(function(t){0<t.count?(renderAvailablePreviews(n,t.count,t.format),X.isProcessing=!1):X.getPreviews("Svg").then(function(e){0<e.count?(renderAvailablePreviews(n,e.count,e.format),X.isProcessing=!1):0===e.count&&0===t.count?(renderAvailablePreviews(n,-1,"ThumbnailBig"),X.isProcessing=!1):handlePreviewError()}).catch(handlePreviewError)})}():X.selectedVersion.hasFallbackPreviews?renderAvailablePreviews(n,X.selectedVersion.previewUrlCount,X.selectedVersion.previewFormat):handlePreviewError()}).catch(handlePreviewError));function renderWithoutPreviews(e){"InProgress"===e||"NotScheduled"===e?X.isProcessing=!0:(X.processErrorOccurred=!0,X.enlargedPreviewLink=UniDocMan.IMAGE_EXPANDED_PREVIEW_NOT_AVAILABLE)}function renderAvailablePreviews(e,t,n){X.selectedVersion.currentPreviewPage=1,X.selectedVersion.previewUrlCount=t,X.selectedVersion.previewFormat=n,X.selectedVersion.enlargedPreviewBaseUrl=i.PREVIEW_URLS[n],renderPreview(e,i.CONTENT_PREVIEW_LARGE)}function handlePreviewError(e){renderWithoutPreviews()}},X.changePageBy=function changePageBy(e){e=X.selectedVersion.currentPreviewPage+e;!function inPreviewRange(e){var t=X.selectedVersion.previewUrlCount;return 0<e==e<=t}(e)||(X.selectedVersion.hasConnectApiError&&!X.selectedVersion.hasFallbackPreviews&&X.getPreviews(X.selectedVersion.previewFormat).then(function(e){e.count>X.selectedVersion.previewUrlCount&&(X.selectedVersion.previewUrlCount=e.count)}).catch(function(e){}),X.selectedVersion.currentPreviewPage=e,renderPreviewPage(X.placeholderSelectedForExpandedPreview))},X.onKeyDown=function onKeyDown(e){13===e.originalEvent.keyCode&&renderPreviewPage(X.placeholderSelectedForExpandedPreview)},X.showMoreComments=function showMoreComments(e){e.commentsLimit+=u.MORE_COMMENTS},X.showNewDialog=function showNewDialog(){X.selectedPlaceholder&&X.selectedPlaceholder.isOpen&&jQuery(u.HASH+X.selectedPlaceholder.recordId).collapse("toggle");(function cacheValues(){X.cachedSections=y.screenSections,X.cachedFormBuilder=y.formBuilder.fields,y.formBuilder.fields={},y.screenSections={}})(),X.isNewPlaceholderShown=!0,y.setIsEditing(!0)},X.showModal=function showModal(e){w.url(e)},X.showRequestDocumentsModal=function showRequestDocumentsModal(){selectedPlaceholderCount()&&(X.viewRequestDocumentsModal=!0)},X.requestPortalDocuments=function requestPortalDocuments(){X.toggleButtonDisable(),X.requestDocumentsEditMode=!1;for(var o=selectedPlaceholderCount(),e=[],t={},n=0;n<I.placeholders.length;n++){var r=I.placeholders[n];r.isSelected&&(t={recordId:r.recordId,portalDocName:r.portalDocName,portalDocDescription:r.portalDocDescription},e.push(t))}0<e.length?_.requestPortalDocuments(e).then(function(e){for(var t=0;t<I.placeholders.length;t++){var n=I.placeholders[t];n.isSelected&&(n.portalEnabled=!0)}I.uncheckAllPlaceholders(),X.toggleButtonDisable(),X.viewRequestDocumentsModal=!1;var r=o+" ";showSuccessToast(1===o?r+X.labels.PORTAL_DOC_REQUEST_SINGULAR:r+X.labels.PORTAL_DOC_REQUEST_PLURAL)}):(X.toggleButtonDisable(),X.viewRequestDocumentsModal=!1,showErrorToast(X.labels.PORTAL_DOC_REQUEST_NONE))},X.cancelPortalDocuments=function cancelPortalDocuments(){0<X.placeholdersToBeCancelled.length&&_.cancelPortalRequests(X.placeholdersToBeCancelled).then(function(e){for(var t=0;t<I.placeholders.length;t++)I.placeholders[t].isSelected&&(I.placeholders[t].portalEnabled=!1);I.uncheckAllPlaceholders(),X.hideCancelPortalModal()})},X.cancelPortalModal=function cancelPortalModal(){X.placeholdersToBeCancelled=[];for(var e=0;e<I.placeholders.length;e++)I.placeholders[e].isSelected&&!0===I.placeholders[e].portalEnabled&&X.placeholdersToBeCancelled.push(I.placeholders[e].recordId);0!==X.placeholdersToBeCancelled.length?X.showCancelPortalModal=!0:showErrorToast(X.labels.PORTAL_DOC_BULK_CANCEL_NONE)},X.hideCancelPortalModal=function hideCancelPortalModal(){X.showCancelPortalModal=!1},X.showPortalOptions=function showPortalOptions(){X.showPortalOptionsModal=!0},X.showViewerPermissions=function showViewerPermissions(e,t){X.returnFocusElementId=t,X.portalPermissionsList=null,X.partnerPortalPermissions=null,X.showViewerPermissionsModal=!0,e?X.getPartnerPortalPermissionOptions(e):X.getPartnerPortalPermissionOptions(X.selectedPlaceholder)},X.cancelViewerPermissionsUpdate=cancelViewerPermissionsUpdate,X.saveViewerPermissions=function saveViewerPermissions(){X.performingAjax=!0;var t=X.rightClickedPlaceholder||X.selectedPlaceholder,n={};X.partnerPortalPermissions.forEach(function(e){n[e.value.trim()]=e.name.trim()}),_.savePlaceholderViewerPerms(t.recordId,n).then(function(e){X.portalPermissionsList=null,X.partnerPortalPermissions=null,t.viewerRoles=e.viewerRoles,t.viewerGroups=e.viewerGroups,t.viewerProfiles=e.viewerProfiles},function(e){X.portalPermissionsList=null,X.partnerPortalPermissions=null,savePlaceholderFailure(e)}),X.showViewerPermissionsModal=!1,X.performingAjax=!1},X.showVersionModal=function showVersionModal(e){I.setVersionHistory(X.selectedPlaceholder).then(function(){angular.forEach(X.selectedPlaceholder.versions,function(e,t){I.sendPreviewLinkURLRequest(e.previewLink)}),X.returnFocusElementId=e,X.showVersionsModal=!0})},X.sortByStatus=function sortByStatus(){angular.isFunction(X.columnSortHeader)?X.reverse=!X.reverse:X.reverse=!1;X.columnSortHeader=function(e){switch(e.statusTranslation){case b.getLabel(u.STATUS_EXCEPTION):return 1;case b.getLabel(u.STATUS_IN_FILE):return 2;case b.getLabel(u.STATUS_REVIEWED):return 3;case b.getLabel(u.STATUS_APPROVED):return 4;case b.getLabel(u.STATUS_OPEN):return 5;case b.getLabel(u.STATUS_WAIVED):return 6}}},X.sortOrder=sortOrder,X.toggleButtonDisable=function toggleButtonDisable(){X.buttonDisabled=!X.buttonDisabled},X.updatePortalRejectionComment=function updatePortalRejectionComment(){X.selectedPlaceholder&&angular.forEach(X.rejectionReasons,function(e,t){e.reason===X.selectedPlaceholder.portalRejectionReason&&(X.selectedPlaceholder.portalRejectionComment=e.comment)})},X.updatePlaceholderCount=updatePlaceholderCount,X.setArchivedFiles=setArchivedFiles,X.nameInPlaceholderNames=function nameInPlaceholderNames(e){return-1<X.placeholderNames.indexOf(e)},X.formatCommentDate=function formatCommentDate(e){var t=new Date(e);if(!e||isNaN(t.getTime())||!window.LifeCycle.Internationalize)return e;e=window.LifeCycle.Internationalize.format(t,"d"),t=window.LifeCycle.Internationalize.format(t,"t");return e+" "+t},X.formatDatetime=function formatDatetime(e){var t=getOffsetDatetime(e);return t?window.LifeCycle.Internationalize.format(t,"d")+" "+window.LifeCycle.Internationalize.format(t,"t"):e},X.formatDatetimeAsDate=function formatDatetimeAsDate(e){var t=getOffsetDatetime(e);return t?window.LifeCycle.Internationalize.format(t,"d"):e},X.showBulkUpdateModal=function showBulkUpdateModal(){var e=function getSelectedPlaceholderIds(){for(var e=[],t=[],n=0;n<I.placeholders.length;n++){var r=I.placeholders[n];r.isSelected&&(hasEditAccess(r,!0)||t.push(r),e.push(r.recordId))}if(0<t.length)return function showBulkEditAfterApprovalError(e){for(var t="",n=0;n<e.length;n++)t+="\n\t "+e[n].name;showErrorToast(X.labels.BULK_UPDATE_AFTER_APPROVAL_DENIED+t)}(t),[];return e}();0!==e.length&&(X.isLoading=!0,I.getBulkUpdateScreenSectionData(window.DocManId,e).then(function(e){X.isLoading=!1,e&&e.summaryScreenSectionModel&&(X.fieldGridScreenSectionId=e.updateScreenSectionId,X.bulkUpdateRecords=e.summaryScreenSectionModel.records,X.fieldRestrictions=JSON.parse(e.fieldRestrictions))}))},X.onBulkUpdateClosed=function onBulkUpdateClosed(){X.bulkUpdateRecords=[]},X.onBulkUpdateComplete=function onBulkUpdateComplete(){X.isLoading=!0;for(var e=[],t=0;t<X.bulkUpdateRecords.length;t++)e.push(X.bulkUpdateRecords[t].recordId);(function determineChangeOfStatusBulk(){var e=X.getSelectedPlaceholders();I.retrievePlaceholders().then(function(){var i=[];e.forEach(function(e){for(var t,n={},r=new Date,o=0;o<I.placeholders.length;o++){var a=I.placeholders[o];e.recordId==a.recordId&&(e.newPlaceholder=a)}n.old=null==e.exceptionDate?null:new Date(e.exceptionDate),n.new=null==e.newPlaceholder.exceptionDate?null:new Date(e.newPlaceholder.exceptionDate),t=e.newPlaceholder.file&&""!=e.newPlaceholder.file&&(e.newPlaceholder.file.Title||e.newPlaceholder.file.Id),n.new&&(n.new<=r&&e.newPlaceholder.status!=u.STATUS_EXCEPTION?e.newPlaceholder.status=u.STATUS_EXCEPTION:n.new>r&&e.newPlaceholder.status==u.STATUS_EXCEPTION&&(e.newPlaceholder.status=t?u.STATUS_IN_FILE:u.STATUS_OPEN)),e.newPlaceholder.statusTranslation=b.getLabel(e.newPlaceholder.status),s.updatePlaceholderStatus(e.recordId,e.newPlaceholder.status),i.push({recordId:e.recordId,status:{old:e.status,new:e.newPlaceholder.status},exceptionDate:{old:e.exceptionDate,new:e.newPlaceholder.exceptionDate}})}),function postChatterCommentBulk(e){e.forEach(e=>{var t;e.newComment="",e.status.old!=e.status.new&&(e.newComment+=V.ssfbBuildStatusChatterComment(e.status.old,e.status.new)),e.exceptionDate.old!=e.exceptionDate.new&&((t=e.exceptionDate).old=null==t.old?null:o.formatMillisecondsToUTCDate(t.old),t.new=null==t.new?null:o.formatMillisecondsToUTCDate(t.new),e.newComment+=V.ssfbBuildDateChatterComment(null,{originalValue:e.exceptionDate.old,updatedValue:e.exceptionDate.new})),""!=e.newComment&&X.addChatterComment(e,!1)})}(i)})})(),I.updateRequirementRemote(e),I.uncheckAllPlaceholders(),X.isLoading=!1},X.prepareForESig=function prepareForESig(){{var t,n;O.validateDocuments(I.placeholders)&&(X.workingModal=!0,(t=O.getReadyForTaggingCollectionId(I.placeholders))&&""!==t?function getESignatureTaggingUrl(e){return _.getESignatureTaggingUrl(e)}(t).then(function(e){X.workingModal=!1,e&&""!==e&&(e=window.location.origin+e,e+="&documentCollectionId="+t,window.open(e))}):(X.workingModal=!1,X.esignUploadInProgress=!0,n=o.getDocStoresFromSelectedPlaceholders(I.placeholders),function getActiveDocumentCollections(){for(var t=U.defer(),e=[],n=0;n<I.placeholders.length;n++){var r=I.placeholders[n];r.documentCollectionId&&e&&e.indexOf(r.documentCollectionId)<0&&r.status&&function isESignActiveStatus(e){return e&&-1===N.getESignatureNonActiveStatuses().indexOf(e.toUpperCase())}(r.status)&&e.push(r.documentCollectionId)}return 0!==e.length?_.retrieveActiveDocumentCollections(e).then(function(e){t.resolve(e)}):t.resolve([]),t.promise}().then(function(e){0===e.length?function createCollection(e){return _.createCollection(e,!0)}(n).then(function(t){!function createVendorCollection(e,t){return _.createVendorCollection(e,t)}(n,t).then(function(e){retrievePlaceholders()}).catch(function(e){_.deleteCollection(t).then(function(){retrievePlaceholders()})})}):function associateDocsToCollection(e,t){return _.associateDocsToCollection(e,t)}(n,e[0]).then(function(e){retrievePlaceholders()})})))}},X.hasEditAccess=hasEditAccess,X.bulkScreenSectionPostLoad=function bulkScreenSectionPostLoad(e,t,n){var r=y.getPropertyBagObject(X.fieldGridScreenSectionId);Object.keys(r).forEach(function(e){var t,e=r[e];!function isRestrictedField(e){return 0!==X.fieldRestrictions.length&&(e&&e.hasOwnProperty("fieldName")&&-1<Object.keys(X.fieldRestrictions).indexOf(e.fieldName))}(e)||(null===(t=X.fieldRestrictions[e.fieldName])?e.isVisible=!1:e.options&&(e.options=e.options.filter(function(e){return-1===t.indexOf(e.value)})))})},X.isESigDetailAvailable=function isESigDetailAvailable(e){return e&&e.status.toUpperCase()!==u.STATUS_SIGNATURE_CANCEL_PENDING.toUpperCase()&&h.isESignLockedPlaceholder(e.status)&&e.documentCollectionId&&X.hasEditPermissions},X.placeholderToEntity=k.placeholderToEntity,X.getPlaceholderContextType=getPlaceholderContextType,X.getFieldSetMetadata=getFieldSetMetadata,X.columnWidths={},X.fieldSetMetadataMap={},X.namespacePrefix=window.UniDocMan.namespacePrefix,X.init=function init(e,t,n,r,o,a,i){l.CATEGORY=e,l.EXCEPTION_DATE=t,l.LAST_MODIFIED_DATE=n,l.NAME=r,l.RELATIONSHIP=o,l.STATUS=a,l.YEAR=i,initializeDynamicVariables(),function activate(){w.url(p.DEFAULT_ROUTE),X.contextObjectType=X.configValues.contextObjectType,X.contextObjectType&&"LLC_BI__Product_Package__c"==X.contextObjectType?s.configureContextObject(function(e){e&&(e.LLC_BI__Product_Package__c?M.setProductPackageProducts(e):e.Contact&&(window.DocManId=e.Contact)),X.retrieveAndProcessData()}):X.retrieveAndProcessData();jQuery("#placeholderTable").on("show.bs.collapse",function(e){jQuery("#accordion .collapse.in").collapse("hide"),setIsCancelVisible(!1),setIsSaveVisible(!1),setIsEditVisible(!0);for(var t=0;t<X.totalPlaceholdersCount;t++)if(I.placeholders[t].recordId===e.target.id){I.placeholders[t].isOpen=!0,X.loadPlaceholderDetails(I.placeholders[t],0);break}}),X.documentManagerFileSizeLimit=R.get().systemPropsMap.get(T.UNI_DOCMAN_FILE_SIZE_LIMIT),d.allowedFileExtensions=R.get().systemPropsMap.get(T.ALLOWED_FILE_EXTENSIONS),d.allowedFileExtensions=angular.isString(d.allowedFileExtensions)?d.allowedFileExtensions.split(","):"",jQuery("#placeholderTable").on("hide.bs.collapse",function(e){if(!e.target.getAttribute("uni-date-picker"))for(var t=0;t<X.totalPlaceholdersCount;t++)if(I.placeholders[t].recordId===e.target.id){I.placeholders[t].isOpen=!1,I.placeholders[t].newComment="",j.publish(LifeCycle.Topics.GlobalActionButtonHandler.CANCEL);break}}),jQuery("#productDropDownSearch").click(function(e){e.stopPropagation()}),jQuery("#accordion").on("shown.bs.collapse",function(e){setIsCancelVisible(!1),setIsSaveVisible(!1),setIsEditVisible(!0),function scrollTo(e){var t=angular.element(e.target.parentElement),e=angular.element("#accordion");e.animate({scrollTop:e.scrollTop()+t.position().top-35},400)}(e)}),jQuery(window).on("dragover",function(e){e.preventDefault(),e.stopPropagation()}),jQuery(window).on("drop",function(e){e.preventDefault(),e.stopPropagation(),d.draggingFromRightNav=!1}),d.$on(u.SHOW_OVERWRITE_MODAL,function(e,t){X.showOverwriteModal=!0}),d.$on(u.SET_TOAST,function(e,t){var n=null==t.label?"Notification":t.label;showToast(t.body,t.type,t.theme,n),t.link&&(X.downloadSubHeading1=f.DOWNLOAD_SUBHEADING_1,X.downloadVersionId=t.link,X.downloadLinkValue=f.DOWNLOAD_LINK_VALUE,X.downloadSubHeading2=f.DOWNLOAD_SUBHEADING_2),c(d.$digest.bind(d))}),d.$on("resizeColumn",function(e,t){X.columnWidths[t.columnName]=t.columnWidth})}(),function subscribeToSaveEvent(){j.subscribe(LifeCycle.Topics.GlobalActionButtonHandler.SAVE,function(){ssfbSave(X.selectedPlaceholder)})}()},X.ssfbSave=ssfbSave,X.postLoad=function postLoad(){j.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_SAVE),j.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_CANCEL),j.publish(LifeCycle.Topics.GlobalActionButtonHandler.HIDE_EDIT),function loadLegalEntityCustomField(){addCustomField({fieldName:P.LEGAL_ENTITY.LOAN,templateName:"legal-entity-custom-field-loan",templateParams:{options:X.relationshipOptions}}),addCustomField({fieldName:P.LEGAL_ENTITY.UNIVERSAL,templateName:"legal-entity-custom-field-universal",templateParams:{options:X.relationshipOptions}}),updateLegalEntityFieldDisplayValue()}(),function loadDocTypeCustomField(){addCustomField({fieldName:P.DOCTYPE,templateName:"doc-type-custom-field",templateParams:{}})}(),function loadDocTypeNameCustomField(){addCustomField({referenceFieldPath:S.ACCOUNT.DOCTYPE_NAME,templateName:"doc-type-name-custom-field",templateParams:{}}),addCustomField({referenceFieldPath:S.LOAN.DOCTYPE_NAME,templateName:"doc-type-name-custom-field",templateParams:{}}),addCustomField({referenceFieldPath:S.UNIVERSAL.DOCTYPE_NAME,templateName:"doc-type-name-custom-field",templateParams:{}})}(),function loadNameCustomField(){addCustomField({fieldName:P.NAME,templateName:"name-custom-field",templateParams:{}})}()},X.shouldShowHeader=function shouldShowHeader(e){return x.hasVisibleFields(e)},X.ssfbDetermineChangeOfStatus=function ssfbDetermineChangeOfStatus(e){var t=y.formBuilder.fields,n=x.getFields(["LLC_BI__exceptionDate__c","LLC_BI__Exception_Date__c"],t,!0),r=x.getFields(["LLC_BI__reviewStatus__c","LLC_BI__Review_Status__c"],t,!0),o="",t=new Date,n=new Date(parseInt(n.value));e.file||(e.file={previewLoaded:!1,previewLink:""});n<=t&&X.selectedPlaceholder.status!=u.STATUS_EXCEPTION?(r.value=u.STATUS_EXCEPTION,o+=V.ssfbBuildStatusChatterComment(X.selectedPlaceholder.status,u.STATUS_EXCEPTION),X.selectedPlaceholder.status=u.STATUS_EXCEPTION,X.selectedPlaceholder.statusTranslation=b.getLabel(u.STATUS_EXCEPTION)):t<n&&X.selectedPlaceholder.status==u.STATUS_EXCEPTION&&(n=u.STATUS_OPEN,(e.file.Title||e.file.Id)&&(n=u.STATUS_IN_FILE),r.value=n,o+=V.ssfbBuildStatusChatterComment(u.STATUS_EXCEPTION,n),X.selectedPlaceholder.status=n,X.selectedPlaceholder.statusTranslation=b.getLabel(n));return o},X.getCustomFields=function getCustomFields(){return X.customFields},X.customFields=[],X.fetchPreviewData=function fetchPreviewData(t,n,r){return fetch(t+n.count).then(function(e){return 200===e.status&&n.count<r?(n.count++,fetchPreviewData(t,n,r)):(400<=e.status&&0<n.count&&(X.selectedVersion.hasFallbackPreviews=!0),n)}).catch(function(e){return n})},X.getPreviews=function getPreviews(e){var t=-1<X.selectedVersion.previewUrlCount?X.selectedVersion.previewUrlCount:0,n=X.selectedVersion.previewFormat||e,e="Svg"===n?"SVGZ":"JPGZ",n={format:n,count:t},e=function buildPagePreviewRequest(e,t){var n=X.configValues.siteBaseSecureUrl+"/sfc/servlet.shepherd/version/renditionDownload?rendition=";return n+=t+"&versionId="+e+"&page="}(X.selectedVersion.Id,e);return X.fetchPreviewData(e,n,t+3).then(function(e){return e}).catch(function(e){return previewDataResponse})},X.isEditVisible=!0,X.isSaveVisible=!1,X.isCancelVisible=!1,X.isSite=""!==X.configValues.siteBaseSecureUrl,X.deactivateLegacyFilters=function deactivateLegacyFilters(){X.isFilterByCategories=!1,X.selectedCategories=[]},X.getPartnerPortalPermissionOptions=function getPartnerPortalPermissionOptions(e){var t=U.defer(),n=X.permissionService.getViewerPermissions(e);X.portalPermissionsList||(X.portalPermissionsList=[],X.partnerPortalPermissions=[],_.getPlaceholderPermOptions().then(function(e){processPermOptions(e,n),t.resolve(X.portalPermissionsList)}));return t.promise},X.processPermOptions=processPermOptions,X.portalPermissionsList=null,X.partnerPortalPermissions=null,X.actionService=H,X.getSelectedPlaceholders=getSelectedPlaceholders,X.returnFocusElementId=null}angular.module("app").controller("PlaceholderController",PlaceholderController),PlaceholderController.$inject=["$scope","COLUMNS","FILE_RECORD_TYPES","LEFT_NAV_FILTER_HEADERS","FILE","dataService","browserDetectService","commonService","uploadService","$timeout","$rootScope","CONSTANTS","ALERT_DIALOG","ROUTES","NEW_OPTIONS","CATEGORY_FIELD","permissionService","PERMISSIONS","TOAST_TYPES","SYSTEM_PROPERTIES","FIELD_NAMES","REFERENCE_PATHS","universalDocManRemotingService","defaultDownloadService","downloadService","fileStagingService","placeholderService","eSignatureService","eSignaturePreparationService","messageService","config","$location","$q","productPackageService","labels","navigator","screenSection","ndsFormService","chatterService","ssfbService","filterService","pubsub","$filter","categoryService","actionService"]}()},function(e,t){!function(){"use strict";function StatusController(r,e,o,n,a,i){this.updatePlaceholderStatus=function updatePlaceholderStatus(e,t){t===i.STATUS_EXCEPTION&&e.portalEnabled?r.controller.initializePortalRejectionModal(e):o.performStatusUpdate(r,e,t)},this.canOpenStatusDropdown=function canOpenStatusDropdown(e){var t=n.hasEditAfterApprovalPermission("UNI_REVIEW_DOCUMENTS",e.status),e=a.statusLists[e.statusListValue];return t&&0<e.length},function activate(){e.$$listeners[i.SAVED_PORTAL_REJECTION_REASON]||e.$on(i.SAVED_PORTAL_REJECTION_REASON,function(e,t,n){o.performStatusUpdate(r,t,n)});e.$$listeners[i.UPDATE_PLACEHOLDER_STATUS]||e.$on(i.UPDATE_PLACEHOLDER_STATUS,function(e,t,n){o.performStatusUpdate(r,t,n)})}()}angular.module("app").controller("StatusController",StatusController),StatusController.$inject=["$scope","$rootScope","commonService","permissionService","placeholderService","CONSTANTS"]}()},function(e,t){!function(){"use strict";function RightNavController(n,o,e,a,i,l,t,r,s,c,d){var u=this;function initializeDynamicVariables(){u.relationships=[],u.selectedRelationship=null,u.selectedRelationshipPlaceholders=[],u.noSelectedRelationshipPlaceholders=!0,u.pledgedCollateral=[],u.selectedCollateral=null,u.selectedCollateralPlaceholders=[],u.noSelectedCollateralPlaceholders=!0,u.isLoaded=!1,u.rightNavDisplay="",u.draggingFiles=!1,u.disableDraggingPromise=null,i.archivedFiles=[]}u.archive=e.ARCHIVE,u.relationship=e.RELATIONSHIP,u.fileStaging=e.FILE_STAGING,u.collateral=e.COLLATERAL,u.showPermanentDeleteModal=!1,u.placeholderToBeDeleted=null,u.rightNavIsBusy=!1,u.fileStagingService=t,u.configValues=d.get(),u.toggleRelationship=function toggleRelationship(e){u.selectedRelationship=e,u.rightNavSearchText="",u.selectedRelationshipPlaceholders=[],u.noSelectedRelationshipPlaceholders=!0,o.retrieveDocumentsWithAttachmentsForSpecifiedId(e.accountId,function(e){0<e.length?s.prepareForUrls(e).then(function(){u.selectedRelationshipPlaceholders=e}):n.$apply(function(){u.selectedRelationshipPlaceholders=e,u.noSelectedRelationshipPlaceholders=!1})},null)},u.togglePledgedCollateral=function togglePledgedCollateral(e){u.selectedCollateral=e,u.rightNavSearchText="",u.selectedCollateralPlaceholders=[],u.noSelectedCollateralPlaceholders=!0,e&&o.retrieveDocumentsWithAttachmentsForSpecifiedId(e.collateralId,function(e){0<e.length?s.prepareForUrls(e).then(function(){u.selectedCollateralPlaceholders=e}):n.$apply(function(){u.selectedCollateralPlaceholders=e,u.noSelectedCollateralPlaceholders=!1})},null)},u.toggleRightNav=function toggleRightNav(e){{var t,n;u.rightNavIsBusy||(t=!(u.rightNavIsBusy=!0),n=!1,u.rightNavDisplay===e&&(t=!0),u.rightNavDisplay=e,u.isLoaded?t?(u.rightNavDisplay="",u.isLoaded=!1):n=!0:(n=!0,u.isLoaded=!0),u.rightNavIsBusy=!1,n&&u.initiateRemoteCallToRetrieveRightNavData())}},u.archiveFromFileStaging=function archiveFromFileStaging(e){var t=u.fileStagingService.stagedFiles.indexOf(e);l.archivePlaceholderFromFileStaging(e.recordId).then(function(){n.$evalAsync(function(){u.fileStagingService.stagedFiles.remove(u.fileStagingService.stagedFiles[t])}),o.retrieveArchivedDocumentsWithAttachments(function(e){s.prepareForUrls(e).then(function(){i.archivedFiles=e})})})},u.initiateRemoteCallToRetrieveRightNavData=function initiateRemoteCallToRetrieveRightNavData(){{var n;u.rightNavSearchText="",u.rightNavDisplay===u.relationship&&(u.relationships=[],u.configValues.contextObjectType===a.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&c.selectedProductInProductPackage.objectType===a.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE?(n=[],angular.forEach(c.productPackageProducts,function(e,t){l.retrieveLegalEntities(e.recordId).then(function(e){angular.forEach(e,function(e,t){e&&e.accountId&&n.indexOf(e.accountId)<0&&(n.push(e.accountId),u.relationships.push(e))})})})):l.retrieveLegalEntities(window.DocManId).then(function(e){e&&(u.relationships=e)}),u.isLoaded=!0)}{var r;u.rightNavDisplay===u.collateral&&(u.pledgedCollateral=[],r=[],u.configValues.contextObjectType===a.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE&&c.selectedProductInProductPackage.objectType===a.CONTEXT_OBJECT_TYPE_PRODUCT_PACKAGE?angular.forEach(c.productPackageProducts,function(e,t){e.objectType===a.CONTEXT_OBJECT_TYPE_LOAN&&r.push(e.recordId)}):r.push(window.DocManId),l.retrieveMultiplePledgedCollateral(r).then(function(e){e&&0<e.length&&(u.pledgedCollateral=e)}))}u.rightNavDisplay===u.archive&&o.retrieveArchivedDocumentsWithAttachments(function(e){s.prepareForUrls(e).then(function(){i.archivedFiles=e,u.isLoaded=!0})});u.rightNavDisplay===u.fileStaging&&t.retrieveFileStagingPlaceholders().then(function(){u.isLoaded=!0})},u.initializeDynamicVariables=initializeDynamicVariables,u.permanentlyDelete=function permanentlyDelete(e){u.showPermanentDeleteModal=!0,u.placeholderToBeDeleted=e},u.cancelDelete=function cancelDelete(){u.showPermanentDeleteModal=!1,u.placeholderToBeDeleted=null},u.confirmDelete=function confirmDelete(){!function deletePlaceholderIndex(t){o.deletePlaceholderIndex(t.recordId,function(){n.$apply(function(){var e=i.archivedFiles.indexOf(t);i.archivedFiles.splice(e,1),u.placeholderToBeDeleted=null,u.showPermanentDeleteModal=!1})},null)}(u.placeholderToBeDeleted)},u.addFileFromLeftNav=function addFileFromLeftNav(){u.isLoaded||u.toggleRightNav(u.fileStaging)},u.toggleAllPlaceholders=function toggleAllPlaceholders(){var e=n.$parent.controller,t=[];t=!n.toggleState||e.totalPlaceholdersCount>e.placeHolderPaginationLimit&&!e.searchText&&!e.placeholderFilterValue?e.placeholderService.placeholders:n.filteredPlaceholders;angular.forEach(t,function(e,t){r.hasRequiredViewerAccess(e)&&(e.isSelected=n.toggleState)})},jQuery("#rightNavRelationshipTable").on("show.bs.collapse",function(n){n.target.getAttribute("uni-date-picker")||angular.forEach(u.relationships,function(e,t){e.accountId===n.target.id?(e.isOpen=!0,u.toggleRelationship(e)):(e.isOpen=!1,jQuery(a.HASH+e.accountId).removeClass(a.IN_CLASS))})}),jQuery("#rightNavCollateralTable").on("show.bs.collapse",function(n){n.target.getAttribute("uni-date-picker")||angular.forEach(u.pledgedCollateral,function(e,t){e.recordId===n.target.id?(e.isOpen=!0,u.togglePledgedCollateral(e)):(e.isOpen=!1,jQuery(a.HASH+e.recordId).removeClass(a.IN_CLASS))})}),jQuery("#rightNavRelationshipTable").on("hide.bs.collapse",function(e){if(!e.target.getAttribute("uni-date-picker"))for(var t=0;t<u.relationships.length;t++)if(u.relationships[t].accountId==e.target.id){n.$apply(function(){u.relationships[t].isOpen=!1});break}}),jQuery("#rightNavCollateralTable").on("hide.bs.collapse",function(e){if(!e.target.getAttribute("uni-date-picker"))for(var t=0;t<u.pledgedCollateral.length;t++)if(u.pledgedCollateral[t].recordId==e.target.id){n.$apply(function(){u.pledgedCollateral[t].isOpen=!1});break}}),initializeDynamicVariables()}angular.module("app").controller("RightNavController",RightNavController),RightNavController.$inject=["$scope","dataService","SECTION","CONSTANTS","$rootScope","universalDocManRemotingService","fileStagingService","permissionService","placeholderService","productPackageService","config"]}()},function(e,t){!function(){"use strict";function LeftNavController(t,n,r,i,e,o,a,l,s){var c=this;function validatedObjectArray(e,t){for(var n=[],r=0;r<e.length;r++){var o,a=!0;for(o in t)e[r].hasOwnProperty(o)?typeof e[r][o]!=typeof t[o]&&(a=!1,console.log(o+i.TYPE_SHOULD_BE+typeof t[o])):(a=!1,console.log(i.REQUIRED_PROPERTY_MISSING+o));a&&n.push(e[r])}return n}s=s.get(),c.customLinks=[],c.buttons=[],c.filters=[],c.showArchiveLink,function activate(){c.showArchiveLink=s.systemPropsMap.get(e.ARCHIVE_BROWSER_VISIBLE),function retrieveCustomLinks(){var e=t.customLinkDefinitions();c.customLinks=validatedObjectArray(e,o)}(),function retrieveButtons(){var e=n.getButtonDefinitions();c.buttons=validatedObjectArray(e,a)}(),function retrieveFilters(){var e=r.getFilters();c.filters=validatedObjectArray(e,l)}()}()}angular.module("app").controller("LeftNavController",LeftNavController),LeftNavController.$inject=["customLinkService","buttonService","filterService","CONSTANTS","SYSTEM_PROPERTIES","CUSTOM_LINK_REQUIREMENTS","CUSTOM_BUTTON_REQUIREMENTS","CUSTOM_FILTER_REQUIREMENTS","config"]}()},function(e,t){!function(){"use strict";function draggable(r){return{restrict:"A",scope:{account:"=",placeholder:"=",hasPermission:"="},link:function link(n,e,t){n.hasPermission&&(e[0].draggable=!0,e.bind("dragstart",function processDragEvent(e){r.draggingFromRightNav=!0;var t=n.placeholder;n.account&&(t.accountId=n.account.accountId,t.relationship=n.account.name);!function getDataTransfer(e){return e.dataTransfer||e.originalEvent.dataTransfer}(e).setData("text",JSON.stringify(t))}))}}}angular.module("app").directive("draggable",draggable),draggable.$inject=["$rootScope"]}()},function(e,t){!function(){"use strict";function fileDropzone(i,l,s,c,d,u,f,p,E,t,e,n,r){var g=r.getLabels();return{restrict:"C",scope:{rightnavcontroller:"=rightnavcontroller",hasPermission:"="},link:function link(o,a,e){this.configValues=t.get(),o.hasPermission&&(a.bind(s.DRAG_OVER_EVENT,processDragOverOrEnter),a.bind(s.DRAG_ENTER_EVENT,processDragOverOrEnter),a.bind(s.DROP_EVENT,processDropEvent),a.bind(s.DRAG_LEAVE_EVENT,processDragOverOrEnter));function getDataTransfer(e){return e.dataTransfer||e.originalEvent.dataTransfer}function processDragOverOrEnter(e){var t=jQuery(e.target);return"dragleave"==e.type?t.removeClass("fileHover"):t.addClass("fileHover"),o.hasPermission?(e.type===s.DRAG_ENTER_EVENT||e.type===s.DRAG_OVER_EVENT?(u.draggingFromRightNav||a.addClass(s.STAGE_DRAGGED_CLASS),o&&o.$parent&&o.$parent.vm&&null!=o.$parent.vm.disableDraggingPromise&&($interval.cancel(o.$parent.vm.disableDraggingPromise),o.$parent.vm.disableDraggingPromise=null)):e.type===s.DRAG_LEAVE_EVENT&&a.removeClass(s.STAGE_DRAGGED_CLASS),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation)||(getDataTransfer(e).effectAllowed=s.COPY_EFFECT),!1):(a.unbind(s.DRAG_OVER_EVENT,processDragOverOrEnter),a.unbind(s.DRAG_ENTER_EVENT,processDragOverOrEnter),a.unbind(s.DROP_EVENT,processDropEvent),a.unbind(s.DRAG_LEAVE_EVENT,processDragOverOrEnter),!1)}function linkRelationshipDoc(n){var r,e={name:n.fileName,size:n.fileSize,type:n.mimeType};o.rightnavcontroller?r=o.rightnavcontroller:o.$parent.vm&&(r=o.$parent.vm),f.linkDocumentVersion(n.file.Id,o.$parent.placeholder.recordId,E.generateFileMetadata(o.$parent.placeholder,e),!0,!0===n.isDocumentExternal,n.file.Title,n.file.documentVersionId).then(function(t){var e=o.$parent.placeholder.status;o.$parent.placeholder.newComment=c.getChatterStatusChangeComment(n.file.Title,e,s.STATUS_IN_FILE),o.$parent.controller.addChatterComment(o.$parent.placeholder),n.isDocumentExternal?(o.$parent.placeholder.isDocumentExternal=n.isDocumentExternal,o.$parent.placeholder.documentStorageType=n.documentStorageType):(o.$parent.placeholder.isDocumentExternal=!1,o.$parent.placeholder.documentStorageType=null),r.rightNavDisplay!==r.collateral&&(n.category&&""!==n.category||function handleFileStagingDocDeletion(n){l.deletePlaceholder(n.recordId,function(){o.$apply(function(){o.rightnavcontroller||(o.rightnavcontroller=o.$parent.vm),d.stagedFiles.forEach(function(e,t){if(e.recordId===n.recordId)return d.stagedFiles.remove(d.stagedFiles[t]),!1}),l.retrieveArchivedDocumentsWithAttachments(function(e){E.prepareForUrls(e).then(function(){u.archivedFiles=e})})})})}(n)),function updatePlaceholderFieldsEval(e,t){var n=p.defer();t.rightNavDisplay!=t.collateral&&t.rightNavDisplay!=t.relationship?n.resolve():f.updatePlaceholderFields(e.recordId,o.$parent.placeholder.recordId).then(function(){n.resolve()});return n.promise}(n,r).then(function(){f.savePlaceholderData(o.$parent.placeholder.recordId,null,null).then(function(e){E.copyPlaceholderProperties(e[0],o.$parent.placeholder),c.updatePlaceholderProperties(o.$parent.placeholder,o.$parent.controller.buildImageURL,t)})})}).catch(function(e){o.$parent.placeholder.uploadingFile=!1})}function getProgressBarData(e,t){o.$parent.placeholder.fileUploadingText=g.UPLOADING+" "+e+" "+g.TO_LABEL+" "+t+" "+s.THREE_PERIODS}function processDropEvent(e){var t,n=new FileReader,r=getDataTransfer(e).files[0];if(!r)return function handleRightNavFileDrop(t){o.$parent.placeholder.file&&o.$parent.placeholder.file.Id?o.$apply(function(){i.shouldOverwrite().then(function(e){e&&(getProgressBarData(t.file.Title,o.$parent.placeholder.name),c.uploadProgress(o.$parent.placeholder,null,100),i.archiveExistingDocument(o.$parent.placeholder).then(function(){linkRelationshipDoc(t)}))})}):(o.$apply(function(){getProgressBarData(t.file.Title,o.$parent.placeholder.name),c.uploadProgress(o.$parent.placeholder,null,100)}),linkRelationshipDoc(t))}(JSON.parse(getDataTransfer(e).getData(s.GETDATA))),!1;1===getDataTransfer(e).files.length?(u.draggingFromRightNav=!1,t=s.MAX_FILE_SIZE,a.removeClass("stageDragged"),null!=e&&e.preventDefault(),n.onload=function(e){r.size<t?function uploadFile(r,o,n){getProgressBarData(o.name,r.$parent.placeholder.name),E.uploadingToPlaceholder=r.$parent.placeholder,c.checkForExistingContentDocument(r.$parent.placeholder.file).then(function(e){var t=e[1];i.uploadContentDocument(o,n,function(e){var n=r.$parent.placeholder.status;e.isExternal&&!0===e.isExternal||(f.createDocumentStorageMetadata(e.id,r.$parent.placeholder.recordId,t,E.generateFileMetadata(r.$parent.placeholder,o)).then(function(t){f.savePlaceholderData(r.$parent.placeholder.recordId,null,null).then(function(e){E.copyPlaceholderProperties(e[0],r.$parent.placeholder),c.updatePlaceholderProperties(r.$parent.placeholder,r.$parent.controller.buildImageURL,t),r.$parent.placeholder.newComment=c.getChatterStatusChangeComment(o.name,n,s.STATUS_IN_FILE),r.$parent.controller.addChatterComment(r.$parent.placeholder)})}).catch(function(e){r.$parent.placeholder.uploadingFile=!1,E.uploadingToPlaceholder={}}),r.$parent.placeholder.isDocumentExternal&&(r.$parent.placeholder.isDocumentExternal=!1,r.$parent.placeholder.documentStorageType=null))},function(e,t,n){e!==s.CANCEL_OVERWRITE&&(r.$parent.placeholder.uploadingFile=!1,E.uploadingToPlaceholder={})},function(e){r.$evalAsync(function(){c.uploadProgress(r.$parent.placeholder,e)})})})}(o,r,e.target.result):(l.dispatchErrorEvent("",g.MAX_FILE_SIZE_ERROR),o.$apply(function(){a.children().removeClass("imageDrag")}))},n.readAsDataURL(r)):(l.dispatchErrorEvent("",g.MULTIPLE_UPLOAD_ERROR),o.$apply(function(){a.removeClass("stageDragged"),a.children().removeClass("imageDrag")}))}}}}angular.module("app").directive("fileDropzone",fileDropzone),fileDropzone.$inject=["uploadService","dataService","CONSTANTS","commonService","fileStagingService","$rootScope","universalDocManRemotingService","$q","placeholderService","config","ALERT_DIALOG","TOAST_TYPES","labels"]}()},function(e,t){!function(){"use strict";function imageOnLoad(r){return{restrict:"C",scope:{placeholder:"=",hasPermission:"=",hasViewPermission:"=?"},link:function link(t,n,e){n.bind("load",function processLoad(e){t.$apply(function(){t&&t.$parent&&(t.$parent.controller&&(e.target.attributes.Id.value==r.TARGET_LARGE_IMG_PREVIEW?clearInterval(t.$parent.controller.enlargedPreviewLoadingInterval):clearInterval(t.$parent.controller.imagePreviewLoadingInterval)),t.placeholder&&!t.placeholder.file&&(t.placeholder.file={}),e.target.attributes.Id.value==r.TARGET_LARGE_IMG_PREVIEW?(t.$parent.controller.enlargedPreviewLoaded=!0,t.$parent.controller.isLoadingLargeImage=!1):t.placeholder.file.previewLoaded=!0),n.removeClass("imageDrag"),t.$parent.controller.proccessErrorOccurred=!1})}),n.bind("error",function processError(e){e.target.attributes.Id.value==r.TARGET_LARGE_IMG_PREVIEW&&(t.$parent.controller.processErrorOccurred||t.$apply(function(){t.$parent.controller.proccessErrorOccurred=!0}))}),t.hasPermission&&(n.bind("dragenter",processDragEnter),n.bind("dragover",processDragEnter),n.bind("dragleave",function processDragLeave(e){t.$apply(function(){n.removeClass("imageDrag")})}));(t.hasPermission||t.hasViewPermission)&&t.placeholder&&n.bind("click",function showExpandedPreview(){t.placeholder.file.previewUnavailable||t.placeholder.isDocumentExternal||t.$parent&&t.$parent.controller&&(t.$parent.controller.isLoadingLargeImage=!0,t.$parent.controller.showExpandedPreview(t.placeholder))});function processDragEnter(e){t.$apply(function(){n.addClass("imageDrag")})}}}}angular.module("app").constant("ELEMENTS",{TARGET_LARGE_IMG_PREVIEW:"largeImagePreview"}).directive("imageOnLoad",imageOnLoad),imageOnLoad.$inject=["ELEMENTS"]}()},function(e,t){!function(){"use strict";function browse(l,s,c,d,u,r,e,f,p){e.get();var E=p.getLabels();return{restrict:"C",scope:{data:"=placeholder"},link:function link(a,t,e){var i=jQuery(t[0]),n=i.siblings(":file");function handleInputFiles(e){for(var n=e.target.files,r=c.MAX_FILE_SIZE,o=0,t=0;t<n.length;t++)!function(t){var e=new FileReader;e.onload=function(e){t.size<r?null!=a.data?function processFileUpload(r,n,o,a){o.data.fileUploadingText=E.UPLOADING+" "+r.name+" "+E.TO_LABEL+" "+o.data.name+c.THREE_PERIODS,d.checkForExistingContentDocument(o.data.file).then(function(e){var t=e[1];u.uploadingToPlaceholder=o.data,l.uploadContentDocument(r,n,function(e){var n=o.data.status;o.data.status=p.getLabel(c.STATUS_IN_FILE),!0!==e.isExternal?f.createDocumentStorageMetadata(e.id,o.data.recordId,t,u.generateFileMetadata(o.data,r)).then(function(t){o.$parent.controller.selectedPlaceholder.newComment=d.getChatterStatusChangeComment(r.name,n,c.STATUS_IN_FILE),o.$parent.controller.addChatterComment(o.$parent.controller.selectedPlaceholder),f.savePlaceholderData(o.data.recordId,null,null).then(function(e){u.copyPlaceholderProperties(e[0],o.data),d.updatePlaceholderProperties(o.data,o.$parent.controller.buildImageURL,t),a&&a()})}).catch(function(e){o.data.uploadingFile=!1,u.uploadingToPlaceholder={}}):a&&a()},function(e,t,n){o.data.uploadingFile=!1,u.uploadingToPlaceholder={},console.log(e),console.log(t),console.log(n)},function(e){d.uploadProgress(o.data,e)})})}(t,e.target.result,a,function(){resetFileInput(i)}):d.createFileStagingPlaceholder(t,e.target.result,a,function(){++o===n.length&&resetFileInput(i)}):s.dispatchErrorEvent("",E.INDIVIDUAL_MAX_FILE_SIZE_ERROR)},e.readAsDataURL(t)}(n[t])}i.unbind("click"),i.click(function(e){n.trigger("click")}),n.unbind(c.CHANGE_EVENT),n.bind(c.CHANGE_EVENT,function processChange(e){"addNewFile"===t[0].id?r.retrieveFileStagingPlaceholders().then(function(){a.$parent.vm.rightNavDisplay=a.$parent.vm.fileStaging,jQuery(".rightNav").toggle("slide",{direction:"right"},500,function(){a.$parent.vm.isLoaded=!0,a.$parent.vm.rightNavIsBusy=!1}),handleInputFiles(e)}):handleInputFiles(e)})}};function resetFileInput(e){(c.IS_IE&&c.IS_IE<10?e:e.siblings(":file")).val(null)}}angular.module("app").directive("uniBrowse",browse),browse.$inject=["uploadService","dataService","CONSTANTS","commonService","placeholderService","fileStagingService","config","universalDocManRemotingService","labels"]}()},function(e,t){!function(){"use strict";function stageDrop(i,l,t,s,c,e){var d=e.getLabels();return{restrict:"C",scope:{},link:function link(o,a,e){function processDragOverOrEnter(e){return e.type===i.DRAG_ENTER_EVENT||e.type===i.DRAG_OVER_EVENT?(s.draggingFromRightNav||a.addClass("stageDragged"),null!=o.$parent.vm.disableDraggingPromise&&(t.cancel(o.$parent.vm.disableDraggingPromise),o.$parent.vm.disableDraggingPromise=null)):e.type===i.DRAG_LEAVE_EVENT&&a.removeClass("stageDragged"),e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation),!1}function validateFiles(e){if(!s.allowedFileExtensions||0===s.allowedFileExtensions.length||""===s.allowedFileExtensions)return e;for(var t=[],n=[],r=0;r<e.length;r++)!function hasAllowedExtension(e){return e=e.name.substr(e.name.lastIndexOf(".")+1).toLowerCase(),-1!==s.allowedFileExtensions.indexOf(e)}(e[r])?t.push(e[r].name):n.push(e[r]);return 0<t.length&&c.dispatchErrorEvent("",d.INVALID_FILE_EXTENSIONS_PART_1+" ",null,d.INVALID_FILE_EXTENSIONS_PART_2+" "+t.join(", ")+"\n"+d.VALID_FILE_EXTENSIONS+s.allowedFileExtensions.join(", ")),n}a.bind(i.DRAG_OVER_EVENT,processDragOverOrEnter),a.bind(i.DRAG_ENTER_EVENT,processDragOverOrEnter),a.bind(i.DRAG_LEAVE_EVENT,processDragOverOrEnter),a.bind(i.DROP_EVENT,function processDrop(e){null!=e&&e.preventDefault(),s.draggingFromRightNav=!1,a.removeClass("stageDragged"),o.$parent.vm.draggingFiles=!1;var t=e.target.files;if((t=e.type===i.DROP_EVENT?l.getDataTransfer(e).files:t).length<=i.MAX_NUMBER_DRAGGED_FILES){if(0<(t=validateFiles(t)).length)for(var n=i.MAX_FILE_SIZE,r=0;r<t.length;r++)!function(t){var e=new FileReader;e.onload=function(e){t.size<n?l.createFileStagingPlaceholder(t,e.target.result,o):c.dispatchErrorEvent("",d.INDIVIDUAL_MAX_FILE_SIZE_ERROR)},e.readAsDataURL(t)}(t[r])}else c.dispatchErrorEvent("",d.MAX_NUMBER_DRAGGED_FILES_ERROR)})}}}angular.module("app").directive("uniStageDrop",stageDrop),stageDrop.$inject=["CONSTANTS","commonService","$interval","$rootScope","dataService","labels"]}()},function(e,t){!function(){"use strict";function rightClick(s,e,t){return{restrict:"A",scope:{controller:"=controller",data:"=placeholder"},link:function link(i,e,t,n){var l=jQuery(e[0]);l.bind("contextmenu",function(a){i.$apply(function(){a.preventDefault(),i.controller.rightClickedPlaceholder=i.data,i.controller.showContextMenu=!0;var e=jQuery(s.MENU_SELECTOR),t=e.outerWidth(),n=e.outerHeight(),r=a.pageX-5,o=a.pageY;r-l.offset().left+t>l.width()&&(r-=t),o-jQuery(s.PARENT_SELECTOR).offset().top+n>jQuery(s.PARENT_SELECTOR).height()&&(o-=n),e.css({display:"block",position:"absolute",left:r,top:o}),e.appendTo("body")})})}}}angular.module("app").constant("RIGHT_CLICK_CONSTANTS",{MENU_SELECTOR:"#placeholderContextMenu",PARENT_SELECTOR:"#docmanapp"}).directive("rightClick",rightClick),rightClick.$inject=["RIGHT_CLICK_CONSTANTS","PERMISSIONS","permissionService"]}()},function(e,t){!function(){"use strict";function addFile(l,i,s,e,c,d,t,u,n){t.get();var f=n.getLabels();return{restrict:"C",scope:{placeholder:"=placeholder"},link:function link(o,a,e){var t=jQuery(a[0]),n=t.siblings(":file");t.unbind("click"),t.click(function(e){n.trigger("click")}),n.unbind(s.CHANGE_EVENT),n.bind(s.CHANGE_EVENT,function processChange(t){"rightClickAddFile"===a[0].id&&document.getElementById("hideContextMenu").click();var n=s.MAX_FILE_SIZE,r=t.target.files[0],e=new FileReader;e.onload=function(e){r.size<n?function uploadFile(r,o,n,a){var i=function getSelectedPlaceholder(e){e=(void 0===e.placeholder?e.$parent:e).placeholder;return e}(r);i.fileUploadingText=f.UPLOADING+" "+o.name+" "+f.TO_LABEL+" "+i.name+s.THREE_PERIODS,d.uploadingToPlaceholder=i,c.checkForExistingContentDocument(i.file).then(function(e){var t=e[1];l.uploadContentDocument(o,n,function(e){var n=i.status;!0!==e.isExternal?u.createDocumentStorageMetadata(e.id,i.recordId,t,d.generateFileMetadata(i,o)).then(function(t){i.newComment=c.getChatterStatusChangeComment(o.name,n,s.STATUS_IN_FILE),r.$parent.controller.addChatterComment(i),u.savePlaceholderData(i.recordId,null,null).then(function(e){d.copyPlaceholderProperties(e[0],i),c.updatePlaceholderProperties(i,r.$parent.controller.buildImageURL,t),i.isDocumentExternal&&(i.isDocumentExternal=!1,i.documentStorageType=null),a&&a()})}):a&&a()},function(e,t,n){e===s.CANCEL_OVERWRITE?a&&a():r.$apply(function(){i.uploadingFile=!1,d.uploadingToPlaceholder={},console.log(e),console.log(t),console.log(n)})},function(e){r.$apply(function(){c.uploadProgress(i,e)})})})}(o,r,e.target.result,function(){!function resetFileInput(e){e.val(null)}(jQuery(t.target))}):i.dispatchErrorEvent("",r.name+" "+f.INDIVIDUAL_MAX_FILE_SIZE_ERROR)},r&&e.readAsDataURL(r)})}}}angular.module("app").directive("uniAddFile",addFile),addFile.$inject=["uploadService","dataService","CONSTANTS","$rootScope","commonService","placeholderService","config","universalDocManRemotingService","labels"]}()},function(e,t){!function(){"use strict";function uniHasPermission(o,a,i,l){return{restrict:"A",link:function link(e,t,n){this.configValues=l.get();var r=n.uniHasPermission.trim(),n=this.configValues.contextObjectType,n=a.hasPermission(n,r);function updateElements(e){if(e)switch(t.prop("nodeName")){case"TEXTAREA":t.attr("readonly",!1);break;case"BUTTON":t.prop("disabled",!1),t.removeClass("disabled");break;case"DIV":jQuery(t).show();break;case"A":t.prop("disabled",!1),t.removeClass("disabled");break;case"SPAN":t.removeClass("hidden")}else switch(t.prop("nodeName")){case"TEXTAREA":t.attr("readonly",!0);break;case"BUTTON":t.prop("disabled",!0),t.addClass("disabled");break;case"DIV":jQuery(t).hide();break;case"A":t.prop("disabled",!0),t.addClass("disabled");break;case"SPAN":t.addClass("hidden")}}o.$on(i.CHANGED_PRODUCT_PACKAGE_PRODUCT,function(e,t){updateElements(a.hasPermission(t,r))}),updateElements(n)}}}angular.module("app").directive("uniHasPermission",uniHasPermission),uniHasPermission.$inject=["$rootScope","permissionService","CONSTANTS","config"]}()},function(e,t){!function(){"use strict";angular.module("app").directive("clickOutside",clickOutside);var s="clickOutside";function clickOutside(i,l){return{restrict:"A",link:function link(t,n,e,r){function Vz(e){n[0]!==e.target&&0===o.find(e.target).length&&t.$apply(function(){a(t,{})})}var o=jQuery(n[0]),a=l(e[s]);i.on("click",Vz),t.$on("$destroy",function(){i.off("click",Vz)})}}}clickOutside.$inject=["$document","$parse"]}()},function(e,t){!function(){"use strict";angular.module("app").directive("errorHandler",errorHandler);function errorHandler(r,o){return{restrict:"C",link:function link(t,e,n){jQuery(window).on(r.ERROR_EVENT,function(e){t.$apply(function(){t.controller.toastType=o.ERROR,t.controller.toast=e.message,t.controller.toastSubHeading=e.toastSubHeading})})}}}errorHandler.$inject=["CONSTANTS","TOAST_TYPES"]}()},function(e,t){function infiniteScroll(p,E,g,h){return{restrict:"A",scope:{infiniteScroll:"&",infiniteScrollContainer:"=",infiniteScrollDistance:"=",infiniteScrollDisabled:"=",infiniteScrollUseDocumentBottom:"=",infiniteScrollListenForEvent:"@"},link:function link(n,r,e){var o=angular.element(E),a=null,i=null,l=null,s=null,t=!0,c=!1,d=null,u=!1;function height(e){e=e[0]||e;return isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight}function pageYOffset(e){e=e[0]||e;return isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset}function offsetTop(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+pageYOffset(e)}function defaultHandler(){var e,t=s===o?(e=height(s)+pageYOffset(s[0].document.documentElement),offsetTop(r)+height(r)):(e=height(s),void(t=0)!==offsetTop(s)&&(t=offsetTop(s)),offsetTop(r)-t+height(r));(t=c?height((r[0].ownerDocument||r[0].document).documentElement):t)-e<=height(s)*a+1?(l=!0,i&&(n.$$phase||p.$$phase?n.infiniteScroll():n.$apply(n.infiniteScroll))):(u&&g.cancel(u),l=!1)}var f=null!=h?function throttle(n,r){var o=null,a=0;function later(){return a=(new Date).getTime(),g.cancel(o),o=null,n.call()}return function throttled(){var e=(new Date).getTime(),t=r-(e-a);t<=0?(g.cancel(o),o=null,a=e,n.call()):o=o||g(later,t,1)}}(defaultHandler,h):defaultHandler;function handleInfiniteScrollDistance(e){a=parseFloat(e)||0}function handleInfiniteScrollDisabled(e){(i=!e)&&l&&(l=!1,f())}function handleInfiniteScrollUseDocumentBottom(e){c=e}function changeContainer(e){null!=s&&s.unbind("scroll",f),null!=(s=e)&&s.bind("scroll",f)}n.$on("$destroy",function handleDestroy(){s.unbind("scroll",f),null!=d&&(d(),d=null),u&&g.cancel(u)}),n.$watch("infiniteScrollDistance",handleInfiniteScrollDistance),handleInfiniteScrollDistance(n.infiniteScrollDistance),n.$watch("infiniteScrollDisabled",handleInfiniteScrollDisabled),handleInfiniteScrollDisabled(n.infiniteScrollDisabled),n.$watch("infiniteScrollUseDocumentBottom",handleInfiniteScrollUseDocumentBottom),handleInfiniteScrollUseDocumentBottom(n.infiniteScrollUseDocumentBottom),changeContainer(o),n.infiniteScrollListenForEvent&&(d=p.$on(n.infiniteScrollListenForEvent,f));function handleInfiniteScrollContainer(e){if(null!=e&&0!==e.length){e=e.nodeType&&1===e.nodeType?angular.element(e):"function"==typeof e.append?angular.element(e[e.length-1]):"string"==typeof e?angular.element(document.querySelector(e)):e;if(null==e)throw new Error("invalid infinite-scroll-container attribute.");changeContainer(e)}}n.$watch("infiniteScrollContainer",handleInfiniteScrollContainer),handleInfiniteScrollContainer(n.infiniteScrollContainer||[]),null!=e.infiniteScrollParent&&changeContainer(angular.element(r.parent()));null!=e.infiniteScrollImmediateCheck&&(t=n.$eval(e.infiniteScrollImmediateCheck));return u=g(function intervalCheck(){return t&&f(),g.cancel(u)})}}}angular.module("app").directive("infiniteScroll",infiniteScroll).value("THROTTLE_MILLISECONDS",null),infiniteScroll.$inject=["$rootScope","$window","$interval","THROTTLE_MILLISECONDS"]},function(e,t){!function(){"use strict";angular.module("app").directive("ndsDateValueDocMan",function ndsDateValue(){return{restrict:"A",scope:{ndsDateValueDocMan:"="},link:function(n,e){e[0].value=n.ndsDateValueDocMan,e.bind("valueChange",function(t){n.$apply(function(){var e=t.originalEvent.detail;n.ndsDateValueDocMan=null!==e?e:null})})}}})}()},function(e,t){!function(){"use strict";angular.module("app").directive("ndsDatetimeValue",function ndsDatetimeValue(){return{restrict:"A",scope:{ndsDatetimeValue:"="},link:function(n,e){e[0].value=n.ndsDatetimeValue,e.bind("valueChange",function(t){n.$apply(function(){var e=t.originalEvent.detail;n.ndsDatetimeValue=null!==e?e:null})})}}})}()},function(e,t){!function(){"use strict";angular.module("app").directive("resizer",function(){return{restrict:"A",scope:{columnName:"<columnName"},link:function(n,t){var r,o,a,i="Status"===n.columnName?188:62,l=800,s=document.body,c=t[0].children[0];function handleMousedown(e){e.stopPropagation(),a=t[0].parentNode.offsetWidth,r=e.clientX,s.addEventListener("mousemove",handleMovement,!0),s.addEventListener("mouseup",handleMouseup,!0)}function handleMovement(e){e.stopPropagation();var t=e.clientX,e=t-r,e=o?o+e:e;isValidWidth(a+e)&&transformResizeHandle(c,e),r=t,o=e}function handleMouseup(e){e.stopPropagation();e=adjustForLimits((a=t[0].parentNode.offsetWidth)+o);s.removeEventListener("mousemove",handleMovement,!0),s.removeEventListener("mouseup",handleMouseup,!0),resetHandle(c),n.emitResizeEvent(n.columnName,e),o=null}function isValidWidth(e){return!(e<i)&&!(l<e)}function adjustForLimits(e){return e<i?i:l<e?l:e}function transformResizeHandle(e,t){e.setAttribute("style","will-change: transform; transform: translateX("+t+"px)")}function resetHandle(e){e.setAttribute("style","will-change: transform;")}n.isValidWidth=isValidWidth,n.adjustForLimits=adjustForLimits,n.transformResizeHandle=transformResizeHandle,n.resetHandle=resetHandle,n.emitResizeEvent=function emitResizeEvent(e,t){void 0!==e&&void 0!==t&&(t={columnName:e,columnWidth:t},n.$emit("resizeColumn",t))},n.handleMousedown=handleMousedown,n.handleMovement=handleMovement,n.handleMouseup=handleMouseup,c.addEventListener("mousedown",handleMousedown,!1)}}})}()},function(e,t){!function(){"use strict";angular.module("app").directive("setFocus",function setFocus(){return{restrict:"A",link:function(e,t){t.focus()}}})}()},function(e,t){!function(){"use strict";angular.module("app").directive("onKeyDownSetFocusTo",function onKeyDownSetFocusTo(){return{restrict:"A",scope:{isFirst:"@",resetFocusTo:"@",returnFocusTo:"=",showModal:"=",closeModalAction:"=",closeModalActionParameter:"="},link:function(t,e){e.on("keydown",function(e){t.resetFocusTo&&t.isFirst?"Tab"===e.key&&e.shiftKey&&(e.preventDefault(),document.getElementById(t.resetFocusTo).focus()):t.resetFocusTo&&("Tab"!==e.key||e.shiftKey||(e.preventDefault(),document.getElementById(t.resetFocusTo).focus())),(" "===e.key||"Enter"===e.key&&t.returnFocusTo)&&(e.preventDefault(),document.getElementById(t.returnFocusTo).focus(),void 0!==t.showModal&&t.$apply(function(){t.showModal=!1}),void 0!==t.closeModalAction&&(void 0!==t.closeModalActionParameter?t.$apply(function(){t.closeModalAction(t.closeModalActionParameter)}):t.$apply(function(){t.closeModalAction()})))})}}})}()},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)},function(e,t,n){"use strict";n.r(t)}]);